<section id="widget-grid">
    <div class="container-box">
        <div class="contain-actions">
            <div class="w-100">
                <ol class="breadcrumb page-breadcrumb">
                    <li class="breadcrumb-item">Gestão de Cargas</li>
                    <li class="breadcrumb-item active">Retorno de Integrações Assíncronas</li>
                </ol>

                <div class="subheader">
                    <h1 class="subheader-title"> Retorno de Integrações Assíncronas </h1>
                </div>
            </div>

            <div id="knockoutPesquisaIntegracaoAssincrona" class="panel">
                <div class="panel-container">
                    <div class="panel-content">
                        <button class="btn btn-default" data-bind="click: ExibirFiltros.eventClick, id: ExibirFiltros.id">
                            <i class="fal fa-filter"></i> Pesquisar
                        </button>

                        <div data-bind="id: ExibirFiltros.idFade, fadeVisible: ExibirFiltros.visibleFade" class="mt-3">
                            <div class="row">
                                <div class="col-12 col-md-3" data-bind="visible: NumeroPedido.visible">
                                    <div class="form-group">
                                        <label class="form-label" data-bind="text: NumeroPedido.text, attr: { for: NumeroPedido.id }"></label>
                                        <input type="text" class="form-control" data-bind="class: NumeroPedido.requiredClass, value: NumeroPedido.val, valueUpdate: 'afterkeydown', attr: { maxlength: NumeroPedido.maxlength, id : NumeroPedido.id}" />
                                    </div>
                                </div>

                                <div class="col-12 col-md-3" data-bind="visible: NumeroCarregamento.visible">
                                    <div class="form-group">
                                        <label class="form-label" data-bind="text: NumeroCarregamento.text, attr: { for: NumeroCarregamento.id }"></label>
                                        <input type="text" class="form-control" data-bind="class: NumeroCarregamento.requiredClass, value: NumeroCarregamento.val, valueUpdate: 'afterkeydown', attr: { maxlength: NumeroCarregamento.maxlength, id : NumeroCarregamento.id}" />
                                    </div>
                                </div>

                                <div class="col-12 col-md-3" data-bind="visible: StatusTarefa.visible">
                                    <div class="form-group">
                                        <label class="form-label" data-bind="text: StatusTarefa.text, attr: { for: StatusTarefa.id }"></label>
                                        <select class="form-control" data-bind="class: StatusTarefa.requiredClass, options: StatusTarefa.options, optionsText: 'text', optionsValue: 'value', value: StatusTarefa.val, attr: { id : StatusTarefa.id}"></select>
                                    </div>
                                </div>

                                <div class="col-12 col-md-3" data-bind="visible: TipoRequest.visible">
                                    <div class="form-group">
                                        <label class="form-label" data-bind="text: TipoRequest.text, attr: { for: TipoRequest.id }"></label>
                                        <select class="form-control" data-bind="class: TipoRequest.requiredClass, options: TipoRequest.options, optionsText: 'text', optionsValue: 'value', value: TipoRequest.val, attr: { id : TipoRequest.id}"></select>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-12 col-md-3" data-bind="visible: DataInicialIntegracao.visible">
                                    <div class="form-group">
                                        <label class="form-label" data-bind="text: DataInicialIntegracao.text, attr: { for: DataInicialIntegracao.id }"></label>
                                        <input type="text" class="form-control" data-bind="class: DataInicialIntegracao.requiredClass, value: DataInicialIntegracao.val, valueUpdate: 'afterkeydown', attr: { maxlength: DataInicialIntegracao.maxlength, id : DataInicialIntegracao.id}" />
                                    </div>
                                </div>

                                <div class="col-12 col-md-3" data-bind="visible: DataFinalIntegracao.visible">
                                    <div class="form-group">
                                        <label class="form-label" data-bind="text: DataFinalIntegracao.text, attr: { for: DataFinalIntegracao.id }"></label>
                                        <input type="text" class="form-control" data-bind="class: DataFinalIntegracao.requiredClass, value: DataFinalIntegracao.val, valueUpdate: 'afterkeydown', attr: { maxlength: DataFinalIntegracao.maxlength, id : DataFinalIntegracao.id}" />
                                    </div>
                                </div>

                                <div class="col-12 col-md-3" data-bind="visible: TipoEtapaAtual.visible">
                                    <div class="form-group">
                                        <label class="form-label" data-bind="text: TipoEtapaAtual.text, attr: { for: TipoEtapaAtual.id }"></label>
                                        <select class="form-control" data-bind="class: TipoEtapaAtual.requiredClass, options: TipoEtapaAtual.options, optionsText: 'text', optionsValue: 'value', value: TipoEtapaAtual.val, attr: { id : TipoEtapaAtual.id}"></select>
                                    </div>
                                </div>

                                <div class="col-12 col-md-3" data-bind="visible: JobId.visible">
                                    <div class="form-group">
                                        <label class="form-label" data-bind="text: JobId.text, attr: { for: JobId.id }"></label>
                                        <input type="text" class="form-control" data-bind="class: JobId.requiredClass, value: JobId.val, valueUpdate: 'afterkeydown', attr: { maxlength: JobId.maxlength, id : JobId.id}" />
                                    </div>
                                </div>
                            </div>

                            <div class="d-flex justify-content-end mt-3" style="gap:8px;">
                                <button class="btn btn-outline-primary waves-effect waves-themed ghost-button" type="button" data-bind="click: CarregarFiltrosPesquisa.eventClick, attr: { id: CarregarFiltrosPesquisa.id}">
                                    <span data-bind="text: CarregarFiltrosPesquisa.text"></span>
                                </button>
                                <button class="btn btn-outline-primary waves-effect waves-themed" type="button" data-bind="click: ConfiguracaoModeloFiltroPesquisa.eventClick, attr: { id: ConfiguracaoModeloFiltroPesquisa.id}">
                                    <span data-bind="text: ConfiguracaoModeloFiltroPesquisa.text"></span>
                                </button>
                                <button class="btn btn-primary" type="button" data-bind="click: Pesquisar.eventClick, attr: { id: Pesquisar.id}">
                                    <span data-bind="text: Pesquisar.text"></span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="grid-panel panel mt-4">
                <div class="panel-container">
                    <div class="panel-container">
                        <div class="panel-content">
                            <table width="100%" class="table table-bordered table-hover" id="grid-gestao-carga-integracao-assincrona" cellspacing="0"></table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<div id="divModalHistoricoIntegracaoAssincrona" class="modal fade" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Histórico de Integração</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal">
                    <i class="fal fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <table width="100%" class="table table-bordered table-hover" cellspacing="0" id="grid-gestao-carga-integracao-assincrona-historico-integracao"></table>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="modalDetalhesIntegracao" role="dialog" aria-hidden="true" tabindex="-1">
    <div class="modal-dialog modal-xl modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Detalhes da Integração</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-hidden="true">
                    <i class="fal fa-times"></i>
                </button>
            </div>

            <div class="modal-body pt-0">
                <ul class="nav nav-tabs">
                    <li class="nav-item">
                        <a href="#knoutDetalhesIntegracaoAssincrona" class="nav-link active" data-bs-toggle="tab" aria-expanded="true">
                            <i class="fal fa-info"></i>
                            <span class="hidden-mobile hidden-tablet">Detalhes</span>
                        </a>
                    </li>
                    <li class="nav-item" id="abaDetalhesIngracaoIntegradora">
                        <a href="#knoutIntegracaoIntegradora" class="nav-link" data-bs-toggle="tab" aria-expanded="true">
                            <i class="fal fa-cloud"></i>
                            <span class="hidden-mobile hidden-tablet">Integrações</span>
                        </a>
                    </li>
                </ul>

                <div class="tab-content border border-top-0 p-3">
                    <div id="knoutDetalhesIntegracaoAssincrona" class="tab-pane fade active show">
                        <div class="row">
                            <table>
                                <tbody>
                                    <tr data-bind="visible: Status.visible">
                                        <td> <b data-bind="text: Status.text" /> </td>
                                        <td> <span data-bind="text: Status.val" /> </td>
                                    </tr>
                                    <tr data-bind="visible: TipoRequisicao.visible">
                                        <td> <b data-bind="text: TipoRequisicao.text" /> </td>
                                        <td> <span data-bind="text: TipoRequisicao.val" /> </td>
                                    </tr>
                                    <tr data-bind="visible: DataCriacao.visible">
                                        <td> <b data-bind="text: DataCriacao.text" /> </td>
                                        <td> <span data-bind="text: DataCriacao.val" /> </td>
                                    </tr>
                                    <tr data-bind="visible: EtapaAtual.visible">
                                        <td> <b data-bind="text: EtapaAtual.text" /> </td>
                                        <td> <span data-bind="text: EtapaAtual.val" /> </td>
                                    </tr>
                                    <tr data-bind="visible: Etapas.visible">
                                        <td> <b data-bind="text: Etapas.text" /> </td>
                                        <td> <span data-bind="text: Etapas.val" /> </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div id="knoutIntegracaoIntegradora" class="tab-pane fade">
                        <div class="row mb-3">
                            <div class="col-12 col-md-3 col-lg-2" data-bind="visible: Situacao.visible">
                                <div class="form-group">
                                    <label class="form-label" data-bind="text: Situacao.text"></label>
                                    <select class="form-control" data-bind="options: Situacao.options, optionsText: 'text', optionsValue: 'value', value: Situacao.val, attr: { id : Situacao.id}, enable : Situacao.enable"></select>
                                </div>
                            </div>
                            <div class="col-12 col-md-9 col-lg-10">
                                <div class="form-group">
                                    <label class="form-label">&nbsp;</label>
                                    <button class="btn btn-primary waves-effect waves-themed float-start" type="button" data-bind="visible: Pesquisar.visible, click: Pesquisar.eventClick, attr: { id: Pesquisar.id }, enable : Pesquisar.enable">
                                        <i class="fal fa-search"></i> <span data-bind="text: Pesquisar.text"></span>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <table width="100%" class="table table-bordered table-hover table-condensed table-striped" data-bind="attr: { id: Grid.id }" cellspacing="0"></table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="~/scripts/integracaoAssincrona"></script>

<link rel="stylesheet" href="/css/acompanhamentoCarga" />
<link rel="stylesheet" href="/css/tracking" />

<style type="text/css">
    .page-content {
        padding-left: 0px !important;
        padding-right: 0px !important;
    }
</style>

<script type="text/javascript">
    pageSetUp();

    $(document).ready(inicializarIntegracaoAssincrona);
</script>
