

<section id="widget-grid" class="">
    <ol class="breadcrumb page-breadcrumb">
        <li class="breadcrumb-item">Canhotos</li>
        <li class="breadcrumb-item active">Enviar Canhotos</li>
    </ol>
    <div class="subheader">
        <h1 class="subheader-title">
            Enviar Canhotos
        </h1>
    </div>

    <div id="knockoutPesquisaCanhoto">
        <div class="panel">
            <div class="panel-container">
                <div class="panel-content">
                    @*<button class="btn btn-primary waves-effect waves-themed" data-bind="click: ExibirFiltros.eventClick, id: ExibirFiltros.id">
                            <i class="fal fa-search"></i>
                            Pesquisar Imagens
                        </button>*@

                    <div class="mt-3" data-bind="id: ExibirFiltros.idFade, fadeVisible: ExibirFiltros.visibleFade">
                        <form>
                            <div class="row">
                                <div class="col-12 col-md-3" data-bind="visible: Carga.visible">
                                    <div class="form-group">
                                        <label class="form-label" data-bind="text: Carga.text, attr: { for: Carga.id }"></label>
                                        <div class="input-group">
                                            <input type="text" class="form-control" data-bind="css: Carga.requiredClass, value: Carga.val, valueUpdate: 'afterkeydown', attr: { maxlength: Carga.maxlength, id : Carga.id}" />
                                            <div class="input-group-append">
                                                <button class="btn btn-primary waves-effect waves-themed" data-bind="attr: { id: Carga.idBtnSearch}" type="button" aria-label="Buscar">
                                                    <i class="fal fa-search"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 col-md-1" style="margin-top:32px;">
                                    <div class="custom-file-btn" data-bind="visible: Upload.visible">
                                        <label class="btn btn-primary" data-bind="attr: { for: Upload.idFile }">
                                            <i class="fal fa-upload"></i> Upload
                                        </label>
                                        <input type="file" accept="text/plain" data-bind="event: {change: Upload.eventChange}, attr: { id : Upload.idFile, accept: Upload.accept, multiple: false }">
                                    </div>
                                </div>
                                <div class="col-12 col-md-2" style="margin-top:32px;" data-bind="visible: Confirmar.visible">
                                    <div class="input-group-append">
                                        <button class="btn btn-success waves-effect waves-themed" data-bind="click: Confirmar.eventClick, attr: { id: Confirmar.idBtnSearch}" type="button" aria-label="Confirmar">
                                            Vincular Canhotos
                                        </button>
                                    </div>
                                </div>
                                <div class="col-12 col-md-2" style="margin-top:32px;" data-bind="visible: VincularOutraCanhoteira.visible">
                                    <div class="input-group-append">
                                        <button class="btn btn-success waves-effect waves-themed" data-bind="click: VincularOutraCanhoteira.eventClick, attr: { id: VincularOutraCanhoteira.idBtnSearch}" type="button" aria-label="Vincular Outra Canhoteira">
                                            Vincular Outra Canhoteira
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <div id="knockoutExibirCanhotos">

        <div class="jarviswidget" data-widget-colorbutton="false" data-widget-sortable="false" data-widget-deletebutton="false" data-widget-editbutton="false" data-widget-fullscreenbutton="false" data-widget-custombutton="false" data-widget-togglebutton="false">
            <div class="panel">
                <div class="panel-container">
                    <div class="panel-hdr">
                        <h3><i class="fal fa-edit"></i>Canhotos</h3>
                    </div>
                    <div class="panel-content">

                        <div id="canhoto-inteiro-content">
                            <div class="tab-pane fade active show DivConferencia" id="tabImagensAgrupadas">
                                <div class="row container-imagens padding-top-10">
                                    <!-- ko foreach: { data: ImagensConferencia.val, as: 'imagem' } -->
                                    <div class="col-6 col-md-6">
                                        <div data-bind="css: { 'container-img': true, 'possui-imagem': imagem.Miniatura != null, 'sem-imagem': imagem.Miniatura == null }">
                                            <strong>Canhoto: </strong><span data-bind="text: imagem.Numero"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span></span>
                                            <button type="button" class="btn btn-default btn-sm" style="float:right; width:20px; height:15px; margin-left:5px;" data-bind="click: function(e){ $parent.DownloadCanhoto.eventClick(e) }"><i class="fal fa-download" style="position:absolute; margin-left:-5px; margin-top:-6px;"></i></button>
                                            <button type="button" class="btn btn-default btn-sm" style="float:right; width:20px; height:15px; margin-left:5px;" data-bind="click: function(e){ $parent.Detalhes.eventClick(e) }"><i class="fal fa-info-circle" style="position:absolute; margin-left:-10px; margin-top:-6px;"></i></button>
                                            <!-- ko if: imagem.Miniatura != null -->
                                            <div class="img-canhoto container-drag">
                                                <img class="draggable-img" data-bind="attr: {id: imagem.Id, src: imagem.Miniatura }" />
                                            </div>
                                            <!-- /ko -->
                                            <!-- ko if: $parent.TipoServicoMultiCTe.val() != true -->
                                            <div style="text-align:center; min-height:20px;" data-bind="visible: imagem.VisibilidadeRodape">
                                                <input type="button" data-bind="click: function(e){ $parent.RejeitarImagem.eventClick(e) }, visible: ((!imagem.Rejeitado) || (imagem.PendenteAprovacao )), attr: { value: 'Rejeitar' }" class="btnPesquisarFiltroPesquisa btn btn-labeled btn-danger btn-xs" style="display:inline" />
                                                <input type="button" data-bind="click: function(e){ $parent.ValidarImagem.eventClick(e) }, visible: imagem.PendenteAprovacao, attr: { value: 'Aprovar' }" class="btnPesquisarFiltroPesquisa btn btn-labeled btn-success btn-xs" style="display:inline" />
                                                <input type="button" data-bind="click: function(e){ $parent.ReverterImagem.eventClick(e) }, visible: !imagem.PendenteAprovacao, attr: { value: 'Reverter' }" class="btnPesquisarFiltroPesquisa btn btn-labeled btn-warning btn-xs" style="display:inline" />
                                            </div>
                                            <!-- /ko -->
                                        </div>
                                    </div>
                                    <!-- /ko -->
                                    <!-- ko if: ImagensConferencia.val().length == 0 -->
                                    <div class="col-12 col-md-12 d-flex justify-content-center mt-3">
                                        <div>

                                        </div>
                                    </div>
                                    <!-- /ko -->
                                </div>
                            </div>

                        </div>


                        @*<div class="d-flex justify-content-end mt-2" data-bind="visible: ConfirmarRecebimentoTodas.visible() || AlterarStatusTodos.visible() || JustificarTodas.visible() || ConfirmarCanhotos.visible() || LiberarPagamentoCanhotos.visible() || RejeitarPagamentoCanhotos.visible() || EnviarImagemCanhotos.visible()">
                                <button type="button" class="btn btn-warning ms-2" data-bind="click: EnviarImagemCanhotos.eventClick, visible: EnviarImagemCanhotos.visible, attr: { value: EnviarImagemCanhotos.text, id : EnviarImagemCanhotos.id}">
                                    <span data-bind="text: EnviarImagemCanhotos.text"></span>
                                </button>
                                <button type="button" class="btn btn-success ms-2" data-bind="click: ConfirmarRecebimentoTodas.eventClick, visible: ConfirmarRecebimentoTodas.visible, attr: { value: ConfirmarRecebimentoTodas.text, id : ConfirmarRecebimentoTodas.id}">
                                    <span data-bind="text: ConfirmarRecebimentoTodas.text"></span>
                                </button>
                                <button type="button" class="btn btn-success ms-2" data-bind="click: AlterarStatusTodos.eventClick, visible: AlterarStatusTodos.visible, attr: { value: AlterarStatusTodos.text, id : AlterarStatusTodos.id}">
                                    <span data-bind="text: AlterarStatusTodos.text"></span>
                                </button>
                                <button type="button" class="btn btn-warning ms-2" data-bind="click: JustificarTodas.eventClick, visible: JustificarTodas.visible, attr: { value: JustificarTodas.text, id : JustificarTodas.id}">
                                    <span data-bind="text: JustificarTodas.text"></span>
                                </button>
                                <button type="button" class="btn  btn-warning ms-2" data-bind="click: ConfirmarCanhotos.eventClick, visible: ConfirmarCanhotos.visible, attr: { value: ConfirmarCanhotos.text, id : ConfirmarCanhotos.id}">
                                    <span data-bind="text: ConfirmarCanhotos.text"></span>
                                </button>
                                <button type="button" class="btn btn-success ms-2" data-bind="click: LiberarPagamentoCanhotos.eventClick, visible: LiberarPagamentoCanhotos.visible, attr: { value: LiberarPagamentoCanhotos.text, id : LiberarPagamentoCanhotos.id}">
                                    <span data-bind="text: LiberarPagamentoCanhotos.text"></span>
                                </button>
                                <button type="button" class="btn btn-danger ms-2" data-bind="click: RejeitarPagamentoCanhotos.eventClick, visible: RejeitarPagamentoCanhotos.visible, attr: { value: RejeitarPagamentoCanhotos.text, id : RejeitarPagamentoCanhotos.id}">
                                    <span data-bind="text: RejeitarPagamentoCanhotos.text"></span>
                                </button>
                                <button type="button" class="btn btn-warning ms-2" data-bind="click: InformarDataEntregaCanhotos.eventClick, visible: InformarDataEntregaCanhotos.visible, attr: { value: InformarDataEntregaCanhotos.text, id : InformarDataEntregaCanhotos.id}">
                                    <span data-bind="text: InformarDataEntregaCanhotos.text"></span>
                                </button>
                            </div>*@
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>




<style>
    #canhoto-content .table-sem-paginacao .dt-toolbar-footer {
        display: none;
    }

    #knockoutAnexo .dt-toolbar {
        display: none;
    }

    .imagem-inteira {
        border: 1px solid #bdbdbd;
        padding: 1px;
    }

        .imagem-inteira .img-canhoto button {
            position: absolute;
            width: 25px;
            height: 16px;
            right: 22px;
            left: auto;
            top: 108px;
            display: none;
        }

            .imagem-inteira .img-canhoto button:hover {
                display: block;
            }

        .imagem-inteira .img-canhoto img:hover + button {
            display: block;
        }
</style>


<link rel="stylesheet" href="~/css/conferenciacanhotos" />
<script src="~/scripts/enviarCanhotos"></script>
<script type="text/javascript">

    pageSetUp();

    var _antiForgeryKey = '@ViewBag.AntiForgery';

    $(document).ready(function () {
        loadEnviarCanhotos();
    });

</script>

