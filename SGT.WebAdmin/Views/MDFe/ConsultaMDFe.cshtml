
<ol class="breadcrumb page-breadcrumb">
    <li class="breadcrumb-item">MDFe</li>
    <li class="breadcrumb-item active">Consulta MDFe</li>
</ol>
<div class="subheader">
    <h1 class="subheader-title">
        Consulta de MDF-es
    </h1>
</div>

<div id="knockoutConsultaMDFe">
    <div class="panel">
        <div class="panel-container">
            <div class="panel-content">
                <button class="btn btn-primary waves-effect waves-themed">
                    <i class="fal fa-search"></i>
                    Pesquisar MDF-es
                </button>
                <div class="mt-3">
                    <form>
                        <div class="row">

                            <div class="col-12 col-md-2" data-bind="visible: DataEmissaoInicial.visible">
                                <div class="form-group">
                                    <label class="form-label" data-bind="text: DataEmissaoInicial.text, attr: { for: DataEmissaoInicial.id }"></label>
                                    <input type="text" class="form-control" data-bind="css: DataEmissaoInicial.requiredClass, required: DataEmissaoInicial.required, value: DataEmissaoInicial.val, valueUpdate: 'afterkeydown', attr: { maxlength: DataEmissaoInicial.maxlength, id : DataEmissaoInicial.id}" />
                                </div>
                            </div>

                            <div class="col-12 col-md-2" data-bind="visible: DataEmissaoFinal.visible">
                                <div class="form-group">
                                    <label class="form-label" data-bind="text: DataEmissaoFinal.text, attr: { for: DataEmissaoFinal.id }"></label>
                                    <input type="text" class="form-control" data-bind="value: DataEmissaoFinal.val, valueUpdate: 'afterkeydown', attr: { maxlength: DataEmissaoFinal.maxlength, id : DataEmissaoFinal.id}" />
                                </div>
                            </div>

                            <div class="col-12 col-md-2" data-bind="visible: NumeroInicial.visible">
                                <div class="form-group">
                                    <label class="form-label" data-bind="text: NumeroInicial.text, attr: { for: NumeroInicial.id }"></label>
                                    <input type="text" class="form-control" data-bind="value: NumeroInicial.val, valueUpdate: 'afterkeydown', attr: { maxlength: NumeroInicial.maxlength, id : NumeroInicial.id}" />
                                </div>
                            </div>


                            <div class="col-12 col-md-2" data-bind="visible: NumeroFinal.visible">
                                <div class="form-group">
                                    <label class="form-label" data-bind="text: NumeroFinal.text, attr: { for: NumeroFinal.id }"></label>
                                    <input type="text" class="form-control" data-bind="value: NumeroFinal.val, valueUpdate: 'afterkeydown', attr: { maxlength: NumeroFinal.maxlength, id : NumeroFinal.id}" />
                                </div>
                            </div>

                            <div class="col-12 col-md-2" data-bind="visible: Placa.visible">
                                <div class="form-group">
                                    <label class="form-label" data-bind="text: Placa.text, attr: { for: Placa.id }"></label>
                                    <input type="text" class="form-control" data-bind="value: Placa.val, valueUpdate: 'afterkeydown', attr: { maxlength: Placa.maxlength, id : Placa.id}" />
                                </div>
                            </div>

                            <div class="col-12 col-md-2" data-bind="visible: Status.visible">
                                <div class="form-group">
                                    <label class="form-label" data-bind="text: Status.text, attr: { for: Status.id }"></label>
                                    <select class="form-control" data-bind="options: Status.options, optionsText: 'text', optionsValue: 'value', value: Status.val, attr: { id : Status.id}"></select>
                                </div>
                            </div>

                            <div class="col-12 col-md-4" data-bind="visible: EstadoOrigem.visible">
                                <div class="form-group">
                                    <label class="form-label" data-bind="text: EstadoOrigem.text, attr: { for: EstadoOrigem.id }"></label>
                                    <div class="input-group">
                                        <input type="text" data-bind="css: EstadoOrigem.requiredClass, value: EstadoOrigem.val, valueUpdate: 'afterkeydown', attr: { 'aria-label': EstadoOrigem.text, maxlength: EstadoOrigem.maxlength, id: EstadoOrigem.id, name: EstadoOrigem.id }" />
                                        <div class="input-group-append">
                                            <button class="btn btn-primary waves-effect waves-themed" type="button" data-bind="attr: { id: EstadoOrigem.idBtnSearch}">
                                                <i class="fal fa-search"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-12 col-md-4" data-bind="visible: EstadoDestino.visible">
                                <div class="form-group">
                                    <label class="form-label" data-bind="text: EstadoDestino.text, attr: { for: EstadoDestino.id }"></label>
                                    <div class="input-group">
                                        <input type="text" data-bind="css: EstadoDestino.requiredClass, value: EstadoDestino.val, valueUpdate: 'afterkeydown', attr: { 'aria-label': EstadoDestino.text, maxlength: EstadoDestino.maxlength, id: EstadoDestino.id, name: EstadoDestino.id }" />
                                        <div class="input-group-append">
                                            <button class="btn btn-primary waves-effect waves-themed" type="button" data-bind="attr: { id: EstadoDestino.idBtnSearch}">
                                                <i class="fal fa-search"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-12 col-md-4" data-bind="visible: ChaveCTe.visible">
                                <div class="form-group">
                                    <label class="form-label" data-bind="text: ChaveCTe.text, attr: { for: ChaveCTe.id }"></label>
                                    <input type="text" class="form-control" data-bind="value: ChaveCTe.val, valueUpdate: 'afterkeydown', attr: { maxlength: ChaveCTe.maxlength, id : ChaveCTe.id}" />
                                </div>
                            </div>

                            <div class="col-12 col-md-6" data-bind="visible: Empresa.visible">
                                <div class="form-group">
                                    <label class="form-label" data-bind="text: Empresa.text, attr: { for: Empresa.id }"></label>
                                    <div class="input-group">
                                        <input type="text" data-bind="css: Empresa.requiredClass, value: Empresa.val, valueUpdate: 'afterkeydown', attr: { 'aria-label': Empresa.text, maxlength: Empresa.maxlength, id: Empresa.id, name: Empresa.id }" />
                                        <div class="input-group-append">
                                            <button class="btn btn-primary waves-effect waves-themed" type="button" data-bind="attr: { id: Empresa.idBtnSearch}">
                                                <i class="fal fa-search"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-12 col-md-4" data-bind="visible: Remetente.visible">
                                <div class="form-group">
                                    <label class="form-label" data-bind="text: Remetente.text, attr: { for: Remetente.id }"></label>
                                    <div class="input-group">
                                        <input type="text" data-bind="css: Remetente.requiredClass, value: Remetente.val, valueUpdate: 'afterkeydown', attr: { 'aria-label': Remetente.text, maxlength: Remetente.maxlength, id: Remetente.id, name: Remetente.id }" />
                                        <div class="input-group-append">
                                            <button class="btn btn-primary waves-effect waves-themed" type="button" data-bind="attr: { id: Remetente.idBtnSearch}">
                                                <i class="fal fa-search"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-12 col-md-2" data-bind="visible: Serie.visible">
                                <div class="form-group">
                                    <label class="form-label" data-bind="text: Serie.text, attr: { for: Serie.id }"></label>
                                    <input type="text" class="form-control" data-bind="value: Serie.val, valueUpdate: 'afterkeydown', attr: { maxlength: Serie.maxlength, id : Serie.id}" />
                                </div>
                            </div>
                            <div class="col-12 col-md-4" data-bind="visible: CargaCodigo.visible">
                                <div class="form-group">
                                    <label class="form-label" data-bind="text: CargaCodigo.text, attr: { for: CargaCodigo.id }"></label>
                                    <div class="input-group">
                                        <input type="text" data-bind="css: CargaCodigo.requiredClass, value: CargaCodigo.val, valueUpdate: 'afterkeydown', attr: { 'aria-label': CargaCodigo.text, maxlength: CargaCodigo.maxlength, id: CargaCodigo.id, name: CargaCodigo.id }" />
                                        <div class="input-group-append">
                                            <button class="btn btn-primary waves-effect waves-themed" type="button" data-bind="attr: { id: CargaCodigo.idBtnSearch}">
                                                <i class="fal fa-search"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>

                    <div class="d-flex align-items-center justify-content-end mb-3">

                        <div class="col-sm">
                            <button class="btn btn-primary waves-effect waves-themed btnAbriModalEncerramentoManualMDFe" onclick="AbrirEncerramentoManualMDFeClick()" type="button">
                                <spa> Encerrar MDF-e Manualmente</span>
                            </button>
                        </div>

                        <button type="button" class="btn btn-info me-3" data-loading-text="Aguarde..." data-bind="click: EmitirLoteMDFeContigenciado.eventClick, visible: EmitirLoteMDFeContigenciado.visible, text: EmitirLoteMDFeContigenciado.text, attr: { id : EmitirLoteMDFeContigenciado.id}">
                            <i class="fal fa-spinner"></i>
                        </button>
                        <div class="dropdown pull-right me-3" data-bind="visible: DownloadLoteXML.visible() ||  DownloadLoteDAMDFE.visible()">
                            <button class="btn btn-success dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="true" type="button" aria-expanded="false" id="dropdownMenuButton1">
                                <i class="fal fa-download"></i>Download<span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                                <li>
                                    <a class="dropdown-item" data-bind="visible: DownloadLoteXML.visible, click: DownloadLoteXML.eventClick, attr: { id: DownloadLoteXML.id}">
                                        <i class="fal fa-solid fa-file-code"></i><span class="ms-2" data-bind="text: DownloadLoteXML.text"></span>
                                    </a>
                                </li>
                                <li>
                                    <a class="dropdown-item" data-bind="visible: DownloadLoteDAMDFE.visible, click: DownloadLoteDAMDFE.eventClick, attr: { id: DownloadLoteDAMDFE.id}">
                                        <i class="fal fa-solid fa-file-pdf"></i><span class="ms-2" data-bind="text: DownloadLoteDAMDFE.text"></span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                        <button class="btn btn-primary waves-effect waves-themed btnPesquisarFiltroPesquisa" data-bind="click: Pesquisar.eventClick, attr: { id: Pesquisar.id}" type="button">
                            <i class="fal fa-search"></i><span class=""data-bind="text: Pesquisar.text"></span>
                        </button>

                    </div>
                    <div class="widget-body">
                        <table width="100%" class="table table-bordered table-hover" data-bind="attr: { id: Pesquisar.idGrid}" cellspacing="0"></table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="knockoutEncerramentoMDFe" role="dialog" aria-hidden="true">
    <div id="knoutEncerramentoMDFe" class="modal-dialog modal-xl modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Encerramento de MDF-e</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal">
                    <i class="fal fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-12 col-md-4">
                        <div class="form-group">
                            <label class="form-label" data-bind="text: DataEncerramento.text, attr: { for: DataEncerramento.id }"></label>
                            <input type="text" class="form-control" data-bind="class: DataEncerramento.requiredClass, value: DataEncerramento.val, attr: { maxlength: DataEncerramento.maxlength, id : DataEncerramento.id} , valueUpdate: 'afterkeydown'" />
                        </div>
                    </div>

                    <div class="col-12 col-md-4">
                        <div class="form-group">
                            <label class="form-label" data-bind="text: HoraEncerramento.text, attr: { for: HoraEncerramento.id }"></label>
                            <input type="text" class="form-control" data-bind=" class: HoraEncerramento.requiredClass, value: HoraEncerramento.val, attr: { maxlength: HoraEncerramento.maxlength, id : HoraEncerramento.id} , valueUpdate: 'afterkeydown'" />
                        </div>
                    </div>

                    <div class="col-12 col-md-4">
                        <div class="form-group">
                            <label class="form-label" data-bind="text: Estado.text, attr: { for: Estado.id }"></label>
                            <input type="text" class="form-control" data-bind=" class: Estado.requiredClass, value: Estado.val, attr: { maxlength: Estado.maxlength, id : Estado.id} , valueUpdate: 'afterkeydown'" />
                        </div>
                    </div>

                    <div class="col-12 col-md-4" data-bind="visible: Localidade.visible">
                        <div class="form-group">
                            <label class="form-label" data-bind="text: Localidade.text, attr: { for: Localidade.id }"></label>
                            <select class="form-control" data-bind="options: Localidade.options, optionsText: 'Descricao', optionsValue: 'Codigo', value: Localidade.val, attr: { id : Localidade.id}"></select>
                        </div>
                    </div>

                </div>

                <div class="d-flex justify-content-end mt-3">
                    <div class="d-flex">
                        <button class="btn btn-labeled btn-success me-2" type="button" data-bind="click: EncerrarMDFe.eventClick, attr: { id : EncerrarMDFe.id}">
                            <span data-bind="text: EncerrarMDFe.text"></span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

<div class="modal fade" id="knockoutInclusaoMotoristaMDFe" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Inclusão de Motorista no MDF-e</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal">
                    <i class="fal fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-12 col-md-3">
                        <div class="form-group">
                            <label class="form-label" data-bind="text: DataEvento.text, attr: { for: DataEvento.id }"></label>
                            <input type="text" class="form-control" data-bind="class: DataEvento.requiredClass, value: DataEvento.val, attr: { maxlength: DataEvento.maxlength, id : DataEvento.id} , valueUpdate: 'afterkeydown'" />
                        </div>
                    </div>

                    <div class="col-12 col-md-4" data-bind="visible: Motorista.visible">
                        <div class="form-group">
                            <label class="form-label" data-bind="text: Motorista.text, attr: { for: Motorista.id }"></label>
                            <div class="input-group">
                                <input type="text" data-bind="css: Motorista.requiredClass, value: Motorista.val, valueUpdate: 'afterkeydown', attr: { 'aria-label': Motorista.text, maxlength: Motorista.maxlength, id: Motorista.id, name: Motorista.id }" />
                                <div class="input-group-append">
                                    <button class="btn btn-primary waves-effect waves-themed" type="button" data-bind="attr: { id: Motorista.idBtnSearch}">
                                        <i class="fal fa-search"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="d-flex justify-content-end mt-3">
                    <div class="d-flex">
                        <button class="btn btn-labeled btn-success me-2" type="button" data-bind="click: Adicionar.eventClick, attr: { id : Adicionar.id}">
                            <span data-bind="text: Adicionar.text"></span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

<div class="modal fade" id="knockoutEncerramentoManualMDFe" role="dialog" aria-hidden="true">
    <div id="knoutEncerramentoManualMDFe" class="modal-dialog modal-xl modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Encerramento Manual de MDF-e</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal">
                    <i class="fal fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">

                    <div class="col-12 col-md-4">
                        <div class="form-group">
                            <label class="form-label" data-bind="text: Chave.text, attr: { for: Chave.id }"></label>
                            <input type="text" class="form-control" data-bind=" class: Chave.requiredClass, value: Chave.val, attr: { maxlength: Chave.maxlength, id : Chave.id} , valueUpdate: 'afterkeydown'" />
                        </div>
                    </div>

                    <div class="col-12 col-md-4">
                        <div class="form-group">
                            <label class="form-label" data-bind="text: Protocolo.text, attr: { for: Protocolo .id }"></label>
                            <input type="text" class="form-control" data-bind=" class: Protocolo .requiredClass, value: Protocolo .val, attr: { maxlength: Protocolo .maxlength, id : Chave.id} , valueUpdate: 'afterkeydown'" />
                        </div>
                    </div>

                    <div class="col-12 col-md-4">
                        <div class="form-group">
                            <label class="form-label" data-bind="text: DataEncerramento.text, attr: { for: DataEncerramento.id }"></label>
                            <input type="text" class="form-control" data-bind="class: DataEncerramento.requiredClass, value: DataEncerramento.val, attr: { maxlength: DataEncerramento.maxlength, id : DataEncerramento.id} , valueUpdate: 'afterkeydown'" />
                        </div>
                    </div>

                </div>
                <div class="row">
                    <div class="col-12 col-md-4">
                        <div class="form-group">
                            <label class="form-label" data-bind="text: LocalidadeManualMdfe.text, attr: { for: LocalidadeManualMdfe.id }"></label>
                            <div class="input-group">
                                <input type="text" class="form-control" data-bind="css: LocalidadeManualMdfe.requiredClass, value: LocalidadeManualMdfe.val, valueUpdate: 'afterkeydown', attr: { maxlength: LocalidadeManualMdfe.maxlength, id : LocalidadeManualMdfe.id}" />
                                <div class="input-group-append">
                                    <button class="btn btn-primary waves-effect waves-themed" data-bind="attr: { id: LocalidadeManualMdfe.idBtnSearch}" type="button" aria-label="Buscar">
                                        <i class="fal fa-search"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-md-4">
                        <div class="form-group">
                            <label class="form-label" data-bind="text: EmpresaManualMdfe.text, attr: { for: EmpresaManualMdfe.id }"></label>
                            <div class="input-group">
                                <input type="text" class="form-control" data-bind="value: EmpresaManualMdfe.val, valueUpdate: 'afterkeydown', attr: { maxlength: EmpresaManualMdfe.maxlength, id : EmpresaManualMdfe.id}" />
                                <div class="input-group-append">
                                    <button class="btn btn-primary waves-effect waves-themed" data-bind="attr: { id: EmpresaManualMdfe.idBtnSearch}" type="button" aria-label="Buscar">
                                        <i class="fal fa-search"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="d-flex justify-content-end mt-3">
                    <div class="d-flex">
                        <button class="btn btn-labeled btn-success me-2" type="button" data-bind="click: EncerrarManualMDFe.eventClick, attr: { id : EncerrarManualMDFe.id}">
                            <span data-bind="text: EncerrarManualMDFe.text"></span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

<script src="~/scripts/consultaMDFe"></script>
<script type="text/javascript">
    pageSetUp();

    $(document).ready(function () {
        LoadConsultaMDFe();
    });
</script>

