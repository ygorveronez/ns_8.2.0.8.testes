@model Dominio.ObjetosDeValor.Embarcador.GestaoEntregas.EntregaView
@{
    Layout = "~/Views/GestaoEntregas/NovoRastreioEntrega/RastreioEntrega.cshtml";
}
<section class="info-pedido">
    <div class="row">
        <div class="col-12">
            @if (Model.Entregue)
            {
                <p class="lead text-center">Seu pedido foi entregue no endereço:</p>
            }
            else
            {
                <p class="lead text-center">Seu pedido será entregue no endereço:</p>
            }
            <p class="text-center exibe-endereco">@Html.Raw(Model.EnderecoCompleto)</p>
        </div>
    </div>
</section>

<!-- Etapas da entrega -->
<section class="exibe-etapas">
    <div class="row">
        <div class="col-12 p-0">
            <div class="container-etapa-01-on">
                <div class="etapa-01">
                    <div class="icon-etapa-01">
                        <img src="/img/rastreio-entrega/icon-partida.svg" alt="Início Viagem">
                    </div>
                    <div class="txt-etapa-01">
                        <p class="text-center">Início viagem</p>
                    </div>
                </div>
            </div>
            <div class="etapa-02">
                <div class="icon-etapa-02-on">
                    <img src="/img/rastreio-entrega/icon-a-caminho.svg" alt="A Caminho">
                </div>
                <div class="txt-etapa-02">
                    <p class="text-center">A caminho</p>
                </div>
            </div>

            @if (Model.Entregue)
            {
                <div class="container-etapa-03-on">
                    <div class="etapa-03">
                        <div class="icon-etapa-03-on">
                            <img src="/img/rastreio-entrega/icon-chegou.svg" alt="Entregue">
                        </div>
                        <div class="txt-etapa-03">
                            <p class="text-center">Entregue</p>
                        </div>
                    </div>
                </div>
            }
            else
            {
                <div class="container-etapa-03">
                    <div class="etapa-03">
                        <div class="icon-etapa-03">
                            <img src="/img/rastreio-entrega/icon-chegou.svg" alt="Entregue">
                        </div>
                        <div class="txt-etapa-03">
                            <p class="text-center">Entregue</p>
                        </div>
                    </div>
                </div>
            }

        </div>
    </div>
</section>

@if (Model.Entregue && Model.Questionario.HabilitarAvaliacao)
{
    <!-- Avaliação da Entrega -->
    <section class="previsao-chegada">
        <div class="row">
            <div class="col-12">
                <h3 class="text-center">Avalie a entrega</h3>
                <div class="box-avalie">
                    <a href="#" alt="1" onclick="avaliar(1)">1</a>
                    <a href="#" alt="2" onclick="avaliar(2)">2</a>
                    <a href="#" alt="3" onclick="avaliar(3)">3</a>
                    <a href="#" alt="4" onclick="avaliar(4)">4</a>
                    <a href="#" alt="5" onclick="avaliar(5)">5</a>
                </div>
            </div>
        </div>
    </section>
}
else if (!Model.Entregue && Model.HabilitarPrevisaoEntrega)
{
    <!-- Previsão de chegada -->
    <section class="previsao-chegada">
        <div class="row">
            <div class="offset-0 offset-md-3 col-12 col-md-6">
                <h3 class="text-center">Previsão de chegada</h3>
                <div class="box-previsao-chegada">
                    <div class="icon-previsao-chegada"><a href="#" onclick="document.getElementById('historico-tab').click()"><img src="/img/rastreio-entrega/icon-historico-ntf.svg" alt=""></a></div>
                    <div class="txt-previsao-chegada">
                        <p class="text-center">@Html.Raw(Model.DiaPrevisaoChegada) &bull; @Html.Raw(Model.HorarioPrevisaoChegada)</p>
                    </div>
                </div>
                <p class="text-center"><small>Essa previsão pode ser atualizada conforme a aproximação do veículo</small></p>
            </div>
        </div>
    </section>
}

@Html.Partial("~/Views/GestaoEntregas/NovoRastreioEntrega/Abas.cshtml", Model)

@if (Model.HabilitarAcessoPortalMultiCliFor)
{
    <section style="position: fixed; bottom: 0; right: 0; padding-right : 1%">
        <div>
            <p>Para mais detalhes da entrega, <a href="@Model.LinkAcessoPortalMultiCliFor" target="_blank">clique aqui</a></p>
        </div>
    </section>
}

<script>
    var nota = @(Model.Avaliacao);
    var codigoRastreio = "@(Model.CodigoRastreio)";

    if (nota > 0) {
        marcarEstrela(nota);
    }

</script>

<style>
    fieldset.main-fieldset {
        padding-top: 15px;
    }

        fieldset.main-fieldset > header {
            margin-bottom: 15px;
        }

    .questions {
    }

        .questions .question {
            background-color: #f5f5f5;
            padding: 15px;
            margin-bottom: 15px;
        }
</style>
