

<ol class="breadcrumb page-breadcrumb">
    <li class="breadcrumb-item">Containers</li>
    <li class="breadcrumb-item active">Movimentação Area Container</li>
</ol>

<div class="subheader">
    <h1 class="subheader-title">
        <i class=""></i> Movimentação Área Container
    </h1>
</div>

<div class="panel" id="knockoutPesquisaMovimentacaoAreaContainer">
    <div class="panel-container">
        <div class="panel-content">
            <button class="btn btn-primary waves-effect waves-themed" data-bind="click: ExibirFiltros.eventClick, id: ExibirFiltros.id">
                <i class="fal fa-search"></i>
                Pesquisar
            </button>

            <div class="mt-2" data-bind="id: ExibirFiltros.idFade, fadeVisible: ExibirFiltros.visibleFade">
                <form>
                    <div class="row">
                        <div class="col-12 col-md-2" data-bind="visible: Carga.visible">
                            <div class="form-group">
                                <label class="form-label" data-bind="text: Carga.text"></label>
                                <input type="text" class="form-control" data-bind="value: Carga.val, valueUpdate: 'afterkeydown', enable: Carga.enable, attr: { maxlength: Carga.maxlength, id : Carga.id}" />
                            </div>
                        </div>
                        <div class="col-12 col-md-2" data-bind="visible: SituacaoEntrega.visible">
                            <div class="form-group">
                                <label class="form-label" data-bind="text: SituacaoEntrega.text"></label>
                                <select class="form-control" data-bind="options: SituacaoEntrega.options, optionsText: 'text', optionsValue: 'value', value: SituacaoEntrega.val, enable: SituacaoEntrega.enable,  attr: { id : SituacaoEntrega.id}"></select>
                            </div>
                        </div>
                        <div class="col-12 col-md-4" data-bind="visible: Motorista.visible">
                            <div class="form-group">
                                <label class="form-label" data-bind="text: Motorista.text, attr: { for: Motorista.id }"></label>
                                <div class="input-group">
                                    <input type="text" class="form-control" data-bind="css: Motorista.requiredClass, value: Motorista.val, valueUpdate: 'afterkeydown', attr: { maxlength: Motorista.maxlength, id : Motorista.id}" />
                                    <div class="input-group-append">
                                        <button class="btn btn-primary waves-effect waves-themed" data-bind="attr: { id: Motorista.idBtnSearch}" type="button" aria-label="Buscar">
                                            <i class="fal fa-search"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-md-4" data-bind="visible: Veiculo.visible">
                            <div class="form-group">
                                <label class="form-label" data-bind="text: Veiculo.text, attr: { for: Veiculo.id }"></label>
                                <div class="input-group">
                                    <input type="text" class="form-control" data-bind="css: Veiculo.requiredClass, value: Veiculo.val, valueUpdate: 'afterkeydown', attr: { maxlength: Veiculo.maxlength, id : Veiculo.id}" />
                                    <div class="input-group-append">
                                        <button class="btn btn-primary waves-effect waves-themed" data-bind="attr: { id: Veiculo.idBtnSearch}" type="button" aria-label="Buscar">
                                            <i class="fal fa-search"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-md-4" data-bind="visible: Origem.visible">
                            <div class="form-group">
                                <label class="form-label" data-bind="text: Origem.text, attr: { for: Origem.id }"></label>
                                <div class="input-group">
                                    <input type="text" class="form-control" data-bind="css: Origem.requiredClass, value: Origem.val, valueUpdate: 'afterkeydown', attr: { maxlength: Origem.maxlength, id : Origem.id}" />
                                    <div class="input-group-append">
                                        <button class="btn btn-primary waves-effect waves-themed" data-bind="attr: { id: Origem.idBtnSearch}" type="button" aria-label="Buscar">
                                            <i class="fal fa-search"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-md-4" data-bind="visible: Destino.visible">
                            <div class="form-group">
                                <label class="form-label" data-bind="text: Destino.text, attr: { for: Destino.id }"></label>
                                <div class="input-group">
                                    <input type="text" class="form-control" data-bind="css: Destino.requiredClass, value: Destino.val, valueUpdate: 'afterkeydown', attr: { maxlength: Destino.maxlength, id : Destino.id}" />
                                    <div class="input-group-append">
                                        <button class="btn btn-primary waves-effect waves-themed" data-bind="attr: { id: Destino.idBtnSearch}" type="button" aria-label="Buscar">
                                            <i class="fal fa-search"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-md-4" data-bind="visible: TipoOperacao.visible">
                            <div class="form-group">
                                <label class="form-label" data-bind="text: TipoOperacao.text, attr: { for: TipoOperacao.id }"></label>
                                <div class="input-group">
                                    <input type="text" class="form-control" data-bind="css: TipoOperacao.requiredClass, value: TipoOperacao.val, valueUpdate: 'afterkeydown', attr: { maxlength: TipoOperacao.maxlength, id : TipoOperacao.id}" />
                                    <div class="input-group-append">
                                        <button class="btn btn-primary waves-effect waves-themed" data-bind="attr: { id: TipoOperacao.idBtnSearch}" type="button" aria-label="Buscar">
                                            <i class="fal fa-search"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-md-2" data-bind="visible: TipoCargaEntrega.visible">
                            <div class="form-group">
                                <label class="form-label" data-bind="text: TipoCargaEntrega.text, attr: { for: TipoCargaEntrega.id }"></label>
                                <select class="form-control" data-bind="options: TipoCargaEntrega.options, optionsText: 'text', optionsValue: 'value', value: TipoCargaEntrega.val, enable: TipoCargaEntrega.enable,  attr: { id : TipoCargaEntrega.id}"></select>
                            </div>
                        </div>
                        <div class="col-12 col-md-2" data-bind="visible: NumeroEXP.visible">
                            <div class="form-group">
                                <label class="form-label" data-bind="text: NumeroEXP.text"></label>
                                <input type="text" class="form-control" data-bind="value: NumeroEXP.val, valueUpdate: 'afterkeydown', enable: NumeroEXP.enable, attr: { maxlength: NumeroEXP.maxlength, id : NumeroEXP.id}" />
                            </div>
                        </div>
                        <div class="col-12 col-md-2" data-bind="visible: NumeroContainer.visible">
                            <div class="form-group">
                                <label class="form-label" data-bind="text: NumeroContainer.text"></label>
                                <input type="text" class="form-control" data-bind="value: NumeroContainer.val, valueUpdate: 'afterkeydown', enable: NumeroContainer.enable, attr: { maxlength: NumeroContainer.maxlength, id : NumeroContainer.id}" />
                            </div>
                        </div>
                    </div>
                </form>
                <div class="d-flex align-items-center justify-content-end mb-2">
                    <button class="btn btn-primary waves-effect waves-themed btnPesquisarFiltroPesquisa" data-bind="click: Pesquisar.eventClick, attr: { id: Pesquisar.id}" type="button">
                        <i class="fal fa-search"></i><span data-bind="text: Pesquisar.text"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row" id="controle-container">
    <div id="knockoutMovimentacaoAreaContainer">
        <div class="row">
            <!-- ko foreach: { data: Entregas.val, as: 'Card' } -->
            <!-- ko component: {name: "carga-card-container", params: Card} -->
            <!-- /ko -->
            <!-- /ko -->
            <div class="col col-xs-12">
                <footer style="background-color: transparent; border: none;">
                    <div id="divPaginationMovimentacaoAreaContainer"></div>
                </footer>
            </div>
        </div>
    </div>
</div>

<script id="carga-card-container" type="text/html">
    <div class="col-6">
        <div data-bind="class: Classe.val">
            <div class="card">
                <div class="panel-header" style="background-color: #80a6c7;">
                    <div class="row">
                        <div class="col-6">
                            <h4 class="mt-2 mx-3 card-title" style="color:#fff;" data-bind="text: TipoDescricao.val + ' ' + Codigo.val"></h4>
                        </div>
                        <div class="col-6 d-flex justify-content-end">
                            <!-- ko if: IsColeta.val -->
                            <i class="fal fa-level-up fa-2x" aria-hidden="true"></i>
                            <!-- /ko -->
                            <!-- ko if: !IsColeta.val -->
                            <i class="fal fa-level-down fa-2x" aria-hidden="true"></i>
                            <!-- /ko -->
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <div class="row">
                        <section class="col col-xs-12 col-sm-12 col-md-6 col-lg-8">
                            <b>Tipo Operação: </b><span data-bind="text: TipoOperacao.val"></span>
                        </section>
                        <section class="col col-xs-12 col-sm-12 col-md-6 col-lg-4" data-bind="visible: (NumeroExp.val != '')">
                            <b>Número EXP: </b><span data-bind="text: NumeroExp.val"></span>
                        </section>
                    </div>
                    <div class="row">
                        <section class="col col-xs-12 col-sm-12 col-md-12 col-lg-12">
                            <b>Veículo: </b><span data-bind="text: Veiculo.val"></span>
                        </section>
                        <section class="col col-xs-12 col-sm-12 col-md-12 col-lg-12">
                            <b>Carga: </b><span data-bind="text: Carga.val"></span>
                        </section>
                    </div>
                </div>
                <div class="card-footer">
                    <div class="row">
                        <div class="col-6">
                            <button class="btn btn-light" data-bind="click: DadosCarga.eventClick, attr: { id: DadosCarga.id}" type="button">
                                <span data-bind="text: DadosCarga.text"></span>
                            </button>
                        </div>
                        <div class="col-6 d-flex justify-content-end">
                            <button class="btn btn-success" data-bind="click: Confirmar.eventClick, visible: Confirmar.visible, attr: { id: Confirmar.id}" type="button">
                                <span data-bind="text: Confirmar.text"></span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</script>

<div class="modal fade" id="modalMovimentacaoAreaContainerConfirmacao" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-centered" role="document">
        <div class="modal-content" id="knockoutMovimentacaoAreaContainerConfirmacao">
            <div class="modal-header">
                <h4 class="modal-title">Confirmar Entrega/Coleta</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal">
                    <i class="fal fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-12 col-md-12" data-bind="visible: AreaRedex.visible">
                        <div class="form-group">
                            <label class="form-label" data-bind="enabled: AreaRedex.enable, text: AreaRedex.text, attr: { for: AreaRedex.id }"></label>
                            <select class="form-control" data-bind="enabled: AreaRedex.enable,options: AreaRedex.options, optionsText: 'text', optionsValue: 'value', value: AreaRedex.val, attr: { id : AreaRedex.id}"></select>
                        </div>
                    </div>
                    <div class="col-12 col-md-6" data-bind="visible: Container.visible">
                        <div class="form-group">
                            <label class="form-label" data-bind="text: Container.text, attr: { for: Container.id }"></label>
                            <div class="input-group">
                                <input type="text" class="form-control" data-bind="css: Container.requiredClass, value: Container.val, valueUpdate: 'afterkeydown', attr: { maxlength: Container.maxlength, id : Container.id}" />
                                <div class="input-group-append">
                                    <button class="btn btn-primary waves-effect waves-themed" data-bind="attr: { id: Container.idBtnSearch}" type="button" aria-label="Buscar">
                                        <i class="fal fa-search"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-md-12" data-bind="visible: DataColetaContainer.visible">
                        <div class="form-group">
                            <label class="form-label" data-bind="text: DataColetaContainer.text"></label>
                            <input type="text" class="form-control" data-bind="value: DataColetaContainer.val, valueUpdate: 'afterkeydown', attr: { maxlength: DataColetaContainer.maxlength, id : DataColetaContainer.id}" />
                        </div>
                    </div>
                    <div class="col-12 col-md-12" data-bind="visible: DataInicioEntregaInformada.visible">
                        <div class="form-group">
                            <label class="form-label" data-bind="text: DataInicioEntregaInformada.text"></label>
                            <input type="text" class="form-control" data-bind="css: DataInicioEntregaInformada.requiredClass, value: DataInicioEntregaInformada.val, valueUpdate: 'afterkeydown', enable: DataInicioEntregaInformada.enable, attr: { maxlength: DataInicioEntregaInformada.maxlength, id : DataInicioEntregaInformada.id}" />
                        </div>
                    </div>
                    <div class="col-12 col-md-12" data-bind="visible: DataEntregaInformada.visible">
                        <div class="form-group">
                            <label class="form-label" data-bind="text: DataEntregaInformada.text"></label>
                            <input type="text" class="form-control" data-bind="css: DataEntregaInformada.requiredClass, value: DataEntregaInformada.val, valueUpdate: 'afterkeydown', enable: DataEntregaInformada.enable, attr: { maxlength: DataEntregaInformada.maxlength, id : DataEntregaInformada.id}" />
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-success" data-bind="click: ConfirmarEntrega.eventClick, visible: ConfirmarEntrega.visible, attr: { value: ConfirmarEntrega.text, id : ConfirmarEntrega.id}">
                    <span data-bind="text: ConfirmarEntrega.text"></span>
                </button>
            </div>
        </div>
    </div>
</div>

<div id="ModaisCarga"></div>

<div id="ControleEntregaContent"></div>

<div id="ControleEntregaModal"></div>

<ul id="ulMenuControleContainerOperador" class="menuControleContainerOperador" style="display:none">
    <li id="liMenuConfirmarEntrega"><a href="javascript:confirmarEntregaColetaControleContainerOperadorClick();">Confirmar</a></li>
</ul>

<style>
    #divPaginationMovimentacaoAreaContainer ul {
        box-shadow: 0 3px 10px #cccccc;
    }

    .card-body section:not(:last-child) {
        margin-bottom: 10px;
    }

    .card-primary, .card-success {
        box-shadow: 0 3px 10px #cccccc;
        border-left-width: 0px;
        border-right-width: 0px;
        border-top-width: 0px;
        border-bottom-width: 0px;
    }

        .card-primary > .card-heading {
            background-color: #80a6c7 !important;
            border: none !important;
        }

        .card-success > .card-heading {
            border: none !important;
        }

    .menuControleContainerOperador {
        list-style-type: none;
        color: #cc8100;
        -webkit-box-shadow: 0 5px 15px rgba(0,0,0,.5);
        box-shadow: 0 5px 15px rgba(0,0,0,.5);
        margin: 0;
        font-weight: bold;
        padding: 0;
        width: 200px;
        background-color: #ffffff;
        display: none;
        position: absolute;
        z-index: 900;
    }

        .menuControleContainerOperador li a {
            display: block;
            color: #cc8100;
            padding: 8px 0 8px 16px;
            text-decoration: none;
        }

            .menuControleContainerOperador li a:hover {
                background-color: #ffeccc;
            }
</style>

<script src="~/scripts/movimentacaoAreaContainer"></script>
<script src="~/scripts/carga"></script>
<script src="~/scripts/controleEntrega"></script>
<script src="~/scripts/dropzone"></script>
<script src="~/scripts/cte"></script>
<script src="~/scripts/configuracaoEmissaoCTe"></script>
<script src="~/scripts/mapas"></script>
<script src="~/scripts/valePallet"></script>
<script src="~/scripts/cargaVeiculoContainer"></script>
<script src="~/scripts/configuracaoComponentesFrete"></script>

<script type="text/javascript">
    pageSetUp();

    _PermissoesPersonalizadasCarga = @Html.Raw(ViewBag.PermissoesPersonalizadasCarga)
    _PermissoesPersonalizadasControleEntrega = @Html.Raw(ViewBag.PermissoesPersonalizadasControleEntrega)

    $(document).ready(function () {
        LoadLocalizationResources(["Cargas.ControleEntrega", "Cargas.Carga"]).then(loadMovimentacaoAreaContainer);
    });

</script>
