"use strict"; function _typeof(e) { return (_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function e(t) { return typeof t } : function e(t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t })(e) } function _possibleConstructorReturn(e, t) { return t && ("object" === _typeof(t) || "function" == typeof t) ? t : _assertThisInitialized(e) } function _getPrototypeOf(e) { return (_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function e(t) { return t.__proto__ || Object.getPrototypeOf(t) })(e) } function _assertThisInitialized(e) { if (void 0 === e) throw ReferenceError("this hasn't been initialised - super() hasn't been called"); return e } function _inherits(e, t) { if ("function" != typeof t && null !== t) throw TypeError("Super expression must either be null or a function"); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, writable: !0, configurable: !0 } }), t && _setPrototypeOf(e, t) } function _setPrototypeOf(e, t) { return (_setPrototypeOf = Object.setPrototypeOf || function e(t, i) { return t.__proto__ = i, t })(e, t) } function _classCallCheck(e, t) { if (!(e instanceof t)) throw TypeError("Cannot call a class as a function") } function _defineProperties(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } function _createClass(e, t, i) { return t && _defineProperties(e.prototype, t), i && _defineProperties(e, i), e } var Emitter = function () { function e() { _classCallCheck(this, e) } return _createClass(e, [{ key: "on", value: function e(t, i) { return this._callbacks = this._callbacks || {}, this._callbacks[t] || (this._callbacks[t] = []), this._callbacks[t].push(i), this } }, { key: "emit", value: function e(t) { this._callbacks = this._callbacks || {}; var i = this._callbacks[t]; if (i) { for (var n = arguments.length, r = Array(n > 1 ? n - 1 : 0), o = 1; o < n; o++)r[o - 1] = arguments[o]; var a = !0, l = !1, s = void 0; try { for (var u, c = i[Symbol.iterator](); !(a = (u = c.next()).done); a = !0)u.value.apply(this, r) } catch (d) { l = !0, s = d } finally { try { a || null == c.return || c.return() } finally { if (l) throw s } } } return this } }, { key: "off", value: function e(t, i) { if (!this._callbacks || 0 === arguments.length) return this._callbacks = {}, this; var n = this._callbacks[t]; if (!n) return this; if (1 === arguments.length) return delete this._callbacks[t], this; for (var r = 0; r < n.length; r++)if (n[r] === i) { n.splice(r, 1); break } return this } }]), e }(), Dropzone = function (e) { function t(e, i) { if (_classCallCheck(this, t), (n = _possibleConstructorReturn(this, _getPrototypeOf(t).call(this))).element = e, n.version = t.version, n.defaultOptions.previewTemplate = n.defaultOptions.previewTemplate.replace(/\n*/g, ""), n.clickableElements = [], n.listeners = [], n.files = [], "string" == typeof n.element && (n.element = document.querySelector(n.element)), !n.element || null == n.element.nodeType) throw Error("Invalid dropzone element."); if (n.element.dropzone) return this.element.dropzone; t.instances.push(_assertThisInitialized(n)), n.element.dropzone = _assertThisInitialized(n); var n, r, o, a = null != (o = t.optionsForElement(n.element)) ? o : {}; if (n.options = t.extend({}, n.defaultOptions, a, null != i ? i : {}), n.options.forceFallback || !t.isBrowserSupported()) return _possibleConstructorReturn(n, n.options.fallback.call(_assertThisInitialized(n))); if (null == n.options.url && (n.options.url = n.element.getAttribute("action")), !n.options.url) throw Error("No URL provided."); if (n.options.acceptedFiles && n.options.acceptedMimeTypes) throw Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated."); if (n.options.uploadMultiple && n.options.chunking) throw Error("You cannot set both: uploadMultiple and chunking."); return n.options.acceptedMimeTypes && (n.options.acceptedFiles = n.options.acceptedMimeTypes, delete n.options.acceptedMimeTypes), null != n.options.renameFilename && (n.options.renameFile = function (e) { return n.options.renameFilename.call(_assertThisInitialized(n), e.name, e) }), n.options.method = n.options.method.toUpperCase(), (r = n.getExistingFallback()) && r.parentNode && r.parentNode.removeChild(r), !1 !== n.options.previewsContainer && (n.options.previewsContainer ? n.previewsContainer = t.getElement(n.options.previewsContainer, "previewsContainer") : n.previewsContainer = n.element), n.options.clickable && (!0 === n.options.clickable ? n.clickableElements = [n.element] : n.clickableElements = t.getElements(n.options.clickable, "clickable")), n.init(), n } return _inherits(t, e), _createClass(t, null, [{ key: "initClass", value: function e() { this.prototype.Emitter = Emitter, this.prototype.events = ["drop", "dragstart", "dragend", "dragenter", "dragover", "dragleave", "addedfile", "addedfiles", "removedfile", "thumbnail", "error", "errormultiple", "processing", "processingmultiple", "uploadprogress", "totaluploadprogress", "sending", "sendingmultiple", "success", "successmultiple", "canceled", "canceledmultiple", "complete", "completemultiple", "reset", "maxfilesexceeded", "maxfilesreached", "queuecomplete"], this.prototype.defaultOptions = { url: null, method: "post", withCredentials: !1, timeout: 3e4, parallelUploads: 2, uploadMultiple: !1, chunking: !1, forceChunking: !1, chunkSize: 2e6, parallelChunkUploads: !1, retryChunks: !1, retryChunksLimit: 3, maxFilesize: 256, paramName: "file", createImageThumbnails: !0, maxThumbnailFilesize: 10, thumbnailWidth: 120, thumbnailHeight: 120, thumbnailMethod: "crop", resizeWidth: null, resizeHeight: null, resizeMimeType: null, resizeQuality: .8, resizeMethod: "contain", filesizeBase: 1e3, maxFiles: null, headers: null, clickable: !0, ignoreHiddenFiles: !0, acceptedFiles: null, acceptedMimeTypes: null, autoProcessQueue: !0, autoQueue: !0, addRemoveLinks: !1, previewsContainer: null, hiddenInputContainer: "body", capture: null, renameFilename: null, renameFile: null, forceFallback: !1, dictDefaultMessage: "Drop files here to upload", dictFallbackMessage: "Your browser does not support drag'n'drop file uploads.", dictFallbackText: "Please use the fallback form below to upload your files like in the olden days.", dictFileTooBig: "File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.", dictInvalidFileType: "You can't upload files of this type.", dictResponseError: "Server responded with {{statusCode}} code.", dictCancelUpload: "Cancel upload", dictUploadCanceled: "Upload canceled.", dictCancelUploadConfirmation: "Are you sure you want to cancel this upload?", dictRemoveFile: "Remove file", dictRemoveFileConfirmation: null, dictMaxFilesExceeded: "You can not upload any more files.", dictFileSizeUnits: { tb: "TB", gb: "GB", mb: "MB", kb: "KB", b: "b" }, init: function e() { }, params: function e(t, i, n) { if (n) return { dzuuid: n.file.upload.uuid, dzchunkindex: n.index, dztotalfilesize: n.file.size, dzchunksize: this.options.chunkSize, dztotalchunkcount: n.file.upload.totalChunkCount, dzchunkbyteoffset: n.index * this.options.chunkSize } }, accept: function e(t, i) { return i() }, chunksUploaded: function e(t, i) { i() }, fallback: function e() { this.element.className = "".concat(this.element.className, " dz-browser-not-supported"); var i = !0, n = !1, r = void 0; try { for (var o, a, l = this.element.getElementsByTagName("div")[Symbol.iterator](); !(i = (a = l.next()).done); i = !0) { var s = a.value; if (/(^| )dz-message($| )/.test(s.className)) { o = s, s.className = "dz-message"; break } } } catch (u) { n = !0, r = u } finally { try { i || null == l.return || l.return() } finally { if (n) throw r } } o || (o = t.createElement('<div class="dz-message"><span></span></div>'), this.element.appendChild(o)); var c = o.getElementsByTagName("span")[0]; return c && (null != c.textContent ? c.textContent = this.options.dictFallbackMessage : null != c.innerText && (c.innerText = this.options.dictFallbackMessage)), this.element.appendChild(this.getFallbackForm()) }, resize: function e(t, i, n, r) { var o = { srcX: 0, srcY: 0, srcWidth: t.width, srcHeight: t.height }, a = t.width / t.height; null == i && null == n ? (i = o.srcWidth, n = o.srcHeight) : null == i ? i = n * a : null == n && (n = i / a); var l = (i = Math.min(i, o.srcWidth)) / (n = Math.min(n, o.srcHeight)); if (o.srcWidth > i || o.srcHeight > n) { if ("crop" === r) a > l ? (o.srcHeight = t.height, o.srcWidth = o.srcHeight * l) : (o.srcWidth = t.width, o.srcHeight = o.srcWidth / l); else if ("contain" === r) a > l ? n = i / a : i = n * a; else throw Error("Unknown resizeMethod '".concat(r, "'")) } return o.srcX = (t.width - o.srcWidth) / 2, o.srcY = (t.height - o.srcHeight) / 2, o.trgWidth = i, o.trgHeight = n, o }, transformFile: function e(t, i) { return (this.options.resizeWidth || this.options.resizeHeight) && t.type.match(/image.*/) ? this.resizeImage(t, this.options.resizeWidth, this.options.resizeHeight, this.options.resizeMethod, i) : i(t) }, previewTemplate: '<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <title>Check</title>\n      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <title>Error</title>\n      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>', drop: function e(t) { return this.element.classList.remove("dz-drag-hover") }, dragstart: function e(t) { }, dragend: function e(t) { return this.element.classList.remove("dz-drag-hover") }, dragenter: function e(t) { return this.element.classList.add("dz-drag-hover") }, dragover: function e(t) { return this.element.classList.add("dz-drag-hover") }, dragleave: function e(t) { return this.element.classList.remove("dz-drag-hover") }, paste: function e(t) { }, reset: function e() { return this.element.classList.remove("dz-started") }, addedfile: function e(i) { var n = this; if (this.element === this.previewsContainer && this.element.classList.add("dz-started"), this.previewsContainer) { i.previewElement = t.createElement(this.options.previewTemplate.trim()), i.previewTemplate = i.previewElement, this.previewsContainer.appendChild(i.previewElement); var r = !0, o = !1, a = void 0; try { for (var l, s = i.previewElement.querySelectorAll("[data-dz-name]")[Symbol.iterator](); !(r = (l = s.next()).done); r = !0) { var u = l.value; u.textContent = i.name } } catch (c) { o = !0, a = c } finally { try { r || null == s.return || s.return() } finally { if (o) throw a } } var d = !0, p = !1, h = void 0; try { for (var f, v = i.previewElement.querySelectorAll("[data-dz-size]")[Symbol.iterator](); !(d = (f = v.next()).done); d = !0)(u = f.value).innerHTML = this.filesize(i.size) } catch (m) { p = !0, h = m } finally { try { d || null == v.return || v.return() } finally { if (p) throw h } } this.options.addRemoveLinks && (i._removeLink = t.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'.concat(this.options.dictRemoveFile, "</a>")), i.previewElement.appendChild(i._removeLink)); var $ = function e(r) { return (r.preventDefault(), r.stopPropagation(), i.status === t.UPLOADING) ? t.confirm(n.options.dictCancelUploadConfirmation, function () { return n.removeFile(i) }) : n.options.dictRemoveFileConfirmation ? t.confirm(n.options.dictRemoveFileConfirmation, function () { return n.removeFile(i) }) : n.removeFile(i) }, y = !0, g = !1, _ = void 0; try { for (var k, b = i.previewElement.querySelectorAll("[data-dz-remove]")[Symbol.iterator](); !(y = (k = b.next()).done); y = !0)k.value.addEventListener("click", $) } catch (F) { g = !0, _ = F } finally { try { y || null == b.return || b.return() } finally { if (g) throw _ } } } }, removedfile: function e(t) { return null != t.previewElement && null != t.previewElement.parentNode && t.previewElement.parentNode.removeChild(t.previewElement), this._updateMaxFilesReachedClass() }, thumbnail: function e(t, i) { if (t.previewElement) { t.previewElement.classList.remove("dz-file-preview"); var n = !0, r = !1, o = void 0; try { for (var a, l = t.previewElement.querySelectorAll("[data-dz-thumbnail]")[Symbol.iterator](); !(n = (a = l.next()).done); n = !0) { var s = a.value; s.alt = t.name, s.src = i } } catch (u) { r = !0, o = u } finally { try { n || null == l.return || l.return() } finally { if (r) throw o } } return setTimeout(function () { return t.previewElement.classList.add("dz-image-preview") }, 1) } }, error: function e(t, i) { if (t.previewElement) { t.previewElement.classList.add("dz-error"), "String" != typeof i && i.error && (i = i.error); var n = !0, r = !1, o = void 0; try { for (var a, l = t.previewElement.querySelectorAll("[data-dz-errormessage]")[Symbol.iterator](); !(n = (a = l.next()).done); n = !0)a.value.textContent = i } catch (s) { r = !0, o = s } finally { try { n || null == l.return || l.return() } finally { if (r) throw o } } } }, errormultiple: function e() { }, processing: function e(t) { if (t.previewElement && (t.previewElement.classList.add("dz-processing"), t._removeLink)) return t._removeLink.innerHTML = this.options.dictCancelUpload }, processingmultiple: function e() { }, uploadprogress: function e(t, i, n) { if (t.previewElement) { var r = !0, o = !1, a = void 0; try { for (var l, s = t.previewElement.querySelectorAll("[data-dz-uploadprogress]")[Symbol.iterator](); !(r = (l = s.next()).done); r = !0) { var u = l.value; "PROGRESS" === u.nodeName ? u.value = i : u.style.width = "".concat(i, "%") } } catch (c) { o = !0, a = c } finally { try { r || null == s.return || s.return() } finally { if (o) throw a } } } }, totaluploadprogress: function e() { }, sending: function e() { }, sendingmultiple: function e() { }, success: function e(t) { if (t.previewElement) return t.previewElement.classList.add("dz-success") }, successmultiple: function e() { }, canceled: function e(t) { return this.emit("error", t, this.options.dictUploadCanceled) }, canceledmultiple: function e() { }, complete: function e(t) { if (t._removeLink && (t._removeLink.innerHTML = this.options.dictRemoveFile), t.previewElement) return t.previewElement.classList.add("dz-complete") }, completemultiple: function e() { }, maxfilesexceeded: function e() { }, maxfilesreached: function e() { }, queuecomplete: function e() { }, addedfiles: function e() { } }, this.prototype._thumbnailQueue = [], this.prototype._processingThumbnail = !1 } }, { key: "extend", value: function e(t) { for (var i = arguments.length, n = Array(i > 1 ? i - 1 : 0), r = 1; r < i; r++)n[r - 1] = arguments[r]; for (var o = 0, a = n; o < a.length; o++) { var l = a[o]; for (var s in l) { var u = l[s]; t[s] = u } } return t } }]), _createClass(t, [{ key: "getAcceptedFiles", value: function e() { return this.files.filter(function (e) { return e.accepted }).map(function (e) { return e }) } }, { key: "getRejectedFiles", value: function e() { return this.files.filter(function (e) { return !e.accepted }).map(function (e) { return e }) } }, { key: "getFilesWithStatus", value: function e(t) { return this.files.filter(function (e) { return e.status === t }).map(function (e) { return e }) } }, { key: "getQueuedFiles", value: function e() { return this.getFilesWithStatus(t.QUEUED) } }, { key: "getUploadingFiles", value: function e() { return this.getFilesWithStatus(t.UPLOADING) } }, { key: "getAddedFiles", value: function e() { return this.getFilesWithStatus(t.ADDED) } }, { key: "getActiveFiles", value: function e() { return this.files.filter(function (e) { return e.status === t.UPLOADING || e.status === t.QUEUED }).map(function (e) { return e }) } }, { key: "init", value: function e() { var i = this; "form" === this.element.tagName && this.element.setAttribute("enctype", "multipart/form-data"), this.element.classList.contains("dropzone") && !this.element.querySelector(".dz-message") && this.element.appendChild(t.createElement('<div class="dz-default dz-message"><button class="dz-button" type="button">'.concat(this.options.dictDefaultMessage, "</button></div>"))), this.clickableElements.length && function e() { return i.hiddenFileInput && i.hiddenFileInput.parentNode.removeChild(i.hiddenFileInput), i.hiddenFileInput = document.createElement("input"), i.hiddenFileInput.setAttribute("type", "file"), (null === i.options.maxFiles || i.options.maxFiles > 1) && i.hiddenFileInput.setAttribute("multiple", "multiple"), i.hiddenFileInput.className = "dz-hidden-input", null !== i.options.acceptedFiles && i.hiddenFileInput.setAttribute("accept", i.options.acceptedFiles), null !== i.options.capture && i.hiddenFileInput.setAttribute("capture", i.options.capture), i.hiddenFileInput.style.visibility = "hidden", i.hiddenFileInput.style.position = "absolute", i.hiddenFileInput.style.top = "0", i.hiddenFileInput.style.left = "0", i.hiddenFileInput.style.height = "0", i.hiddenFileInput.style.width = "0", t.getElement(i.options.hiddenInputContainer, "hiddenInputContainer").appendChild(i.hiddenFileInput), i.hiddenFileInput.addEventListener("change", function () { var t = i.hiddenFileInput.files; if (t.length) { var n = !0, r = !1, o = void 0; try { for (var a, l = t[Symbol.iterator](); !(n = (a = l.next()).done); n = !0) { var s = a.value; i.addFile(s) } } catch (u) { r = !0, o = u } finally { try { n || null == l.return || l.return() } finally { if (r) throw o } } } return i.emit("addedfiles", t), e() }) }(), this.URL = null !== window.URL ? window.URL : window.webkitURL; var n = !0, r = !1, o = void 0; try { for (var a, l = this.events[Symbol.iterator](); !(n = (a = l.next()).done); n = !0) { var s = a.value; this.on(s, this.options[s]) } } catch (u) { r = !0, o = u } finally { try { n || null == l.return || l.return() } finally { if (r) throw o } } this.on("uploadprogress", function () { return i.updateTotalUploadProgress() }), this.on("removedfile", function () { return i.updateTotalUploadProgress() }), this.on("canceled", function (e) { return i.emit("complete", e) }), this.on("complete", function (e) { if (0 === i.getAddedFiles().length && 0 === i.getUploadingFiles().length && 0 === i.getQueuedFiles().length) return setTimeout(function () { return i.emit("queuecomplete") }, 0) }); var c = function e(t) { var i; if ((i = t).dataTransfer.types && i.dataTransfer.types.some(function (e) { return "Files" == e })) return (t.stopPropagation(), t.preventDefault) ? t.preventDefault() : t.returnValue = !1 }; return this.listeners = [{ element: this.element, events: { dragstart: function e(t) { return i.emit("dragstart", t) }, dragenter: function e(t) { return c(t), i.emit("dragenter", t) }, dragover: function e(t) { var n; try { n = t.dataTransfer.effectAllowed } catch (r) { } return t.dataTransfer.dropEffect = "move" === n || "linkMove" === n ? "move" : "copy", c(t), i.emit("dragover", t) }, dragleave: function e(t) { return i.emit("dragleave", t) }, drop: function e(t) { return c(t), i.drop(t) }, dragend: function e(t) { return i.emit("dragend", t) } } }], this.clickableElements.forEach(function (e) { return i.listeners.push({ element: e, events: { click: function n(r) { return (e !== i.element || r.target === i.element || t.elementInside(r.target, i.element.querySelector(".dz-message"))) && i.hiddenFileInput.click(), !0 } } }) }), this.enable(), this.options.init.call(this) } }, { key: "destroy", value: function e() { return this.disable(), this.removeAllFiles(!0), (null != this.hiddenFileInput ? this.hiddenFileInput.parentNode : void 0) && (this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput), this.hiddenFileInput = null), delete this.element.dropzone, t.instances.splice(t.instances.indexOf(this), 1) } }, { key: "updateTotalUploadProgress", value: function e() { var t = 0, i = 0; if (this.getActiveFiles().length) { var n = !0, r = !1, o = void 0; try { for (var a, l, s = this.getActiveFiles()[Symbol.iterator](); !(n = (l = s.next()).done); n = !0) { var u = l.value; t += u.upload.bytesSent, i += u.upload.total } } catch (c) { r = !0, o = c } finally { try { n || null == s.return || s.return() } finally { if (r) throw o } } a = 100 * t / i } else a = 100; return this.emit("totaluploadprogress", a, i, t) } }, { key: "_getParamName", value: function e(t) { return "function" == typeof this.options.paramName ? this.options.paramName(t) : "".concat(this.options.paramName).concat(this.options.uploadMultiple ? "[".concat(t, "]") : "") } }, { key: "_renameFile", value: function e(t) { return "function" != typeof this.options.renameFile ? t.name : this.options.renameFile(t) } }, { key: "getFallbackForm", value: function e() { if (i = this.getExistingFallback()) return i; var i, n, r = '<div class="dz-fallback">'; this.options.dictFallbackText && (r += "<p>".concat(this.options.dictFallbackText, "</p>")), r += '<input type="file" name="'.concat(this._getParamName(0), '" ').concat(this.options.uploadMultiple ? 'multiple="multiple"' : void 0, ' /><input type="submit" value="Upload!"></div>'); var o = t.createElement(r); return "FORM" !== this.element.tagName ? (n = t.createElement('<form action="'.concat(this.options.url, '" enctype="multipart/form-data" method="').concat(this.options.method, '"></form>'))).appendChild(o) : (this.element.setAttribute("enctype", "multipart/form-data"), this.element.setAttribute("method", this.options.method)), null != n ? n : o } }, { key: "getExistingFallback", value: function e() { for (var t = 0, i = ["div", "form"]; t < i.length; t++) { var n, r = i[t]; if (n = function e(t) { var i = !0, n = !1, r = void 0; try { for (var o, a = t[Symbol.iterator](); !(i = (o = a.next()).done); i = !0) { var l = o.value; if (/(^| )fallback($| )/.test(l.className)) return l } } catch (s) { n = !0, r = s } finally { try { i || null == a.return || a.return() } finally { if (n) throw r } } }(this.element.getElementsByTagName(r))) return n } } }, { key: "setupEventListeners", value: function e() { return this.listeners.map(function (e) { return function () { var t = []; for (var i in e.events) { var n = e.events[i]; t.push(e.element.addEventListener(i, n, !1)) } return t }() }) } }, { key: "removeEventListeners", value: function e() { return this.listeners.map(function (e) { return function () { var t = []; for (var i in e.events) { var n = e.events[i]; t.push(e.element.removeEventListener(i, n, !1)) } return t }() }) } }, { key: "disable", value: function e() { var t = this; return this.clickableElements.forEach(function (e) { return e.classList.remove("dz-clickable") }), this.removeEventListeners(), this.disabled = !0, this.files.map(function (e) { return t.cancelUpload(e) }) } }, { key: "enable", value: function e() { return delete this.disabled, this.clickableElements.forEach(function (e) { return e.classList.add("dz-clickable") }), this.setupEventListeners() } }, { key: "filesize", value: function e(t) { var i = 0, n = "b"; if (t > 0) { for (var r = ["tb", "gb", "mb", "kb", "b"], o = 0; o < r.length; o++) { var a = r[o]; if (t >= Math.pow(this.options.filesizeBase, 4 - o) / 10) { i = t / Math.pow(this.options.filesizeBase, 4 - o), n = a; break } } i = Math.round(10 * i) / 10 } return "<strong>".concat(i, "</strong> ").concat(this.options.dictFileSizeUnits[n]) } }, { key: "_updateMaxFilesReachedClass", value: function e() { return null != this.options.maxFiles && this.getAcceptedFiles().length >= this.options.maxFiles ? (this.getAcceptedFiles().length === this.options.maxFiles && this.emit("maxfilesreached", this.files), this.element.classList.add("dz-max-files-reached")) : this.element.classList.remove("dz-max-files-reached") } }, { key: "drop", value: function e(t) { if (t.dataTransfer) { this.emit("drop", t); for (var i = [], n = 0; n < t.dataTransfer.files.length; n++)i[n] = t.dataTransfer.files[n]; if (i.length) { var r = t.dataTransfer.items; r && r.length && null != r[0].webkitGetAsEntry ? this._addFilesFromItems(r) : this.handleFiles(i) } this.emit("addedfiles", i) } } }, { key: "paste", value: function e(t) { if (null != __guard__(null != t ? t.clipboardData : void 0, function (e) { return e.items })) { this.emit("paste", t); var i = t.clipboardData.items; if (i.length) return this._addFilesFromItems(i) } } }, { key: "handleFiles", value: function e(t) { var i = !0, n = !1, r = void 0; try { for (var o, a = t[Symbol.iterator](); !(i = (o = a.next()).done); i = !0) { var l = o.value; this.addFile(l) } } catch (s) { n = !0, r = s } finally { try { i || null == a.return || a.return() } finally { if (n) throw r } } } }, { key: "_addFilesFromItems", value: function e(t) { var i = this; return function () { var e = [], n = !0, r = !1, o = void 0; try { for (var a, l = t[Symbol.iterator](); !(n = (a = l.next()).done); n = !0) { var s, u = a.value; null != u.webkitGetAsEntry && (s = u.webkitGetAsEntry()) ? s.isFile ? e.push(i.addFile(u.getAsFile())) : s.isDirectory ? e.push(i._addFilesFromDirectory(s, s.name)) : e.push(void 0) : null != u.getAsFile && (null == u.kind || "file" === u.kind) ? e.push(i.addFile(u.getAsFile())) : e.push(void 0) } } catch (c) { r = !0, o = c } finally { try { n || null == l.return || l.return() } finally { if (r) throw o } } return e }() } }, { key: "_addFilesFromDirectory", value: function e(t, i) { var n = this, r = t.createReader(), o = function e(t) { return __guardMethod__(console, "log", function (e) { return e.log(t) }) }; return function e() { return r.readEntries(function (t) { if (t.length > 0) { var r = !0, o = !1, a = void 0; try { for (var l, s = t[Symbol.iterator](); !(r = (l = s.next()).done); r = !0) { var u = l.value; u.isFile ? u.file(function (e) { if (!n.options.ignoreHiddenFiles || "." !== e.name.substring(0, 1)) return e.fullPath = "".concat(i, "/").concat(e.name), n.addFile(e) }) : u.isDirectory && n._addFilesFromDirectory(u, "".concat(i, "/").concat(u.name)) } } catch (c) { o = !0, a = c } finally { try { r || null == s.return || s.return() } finally { if (o) throw a } } e() } return null }, o) }() } }, { key: "accept", value: function e(i, n) { this.options.maxFilesize && i.size > 1048576 * this.options.maxFilesize ? n(this.options.dictFileTooBig.replace("{{filesize}}", Math.round(i.size / 1024 / 10.24) / 100).replace("{{maxFilesize}}", this.options.maxFilesize)) : t.isValidFile(i, this.options.acceptedFiles) ? null != this.options.maxFiles && this.getAcceptedFiles().length >= this.options.maxFiles ? (n(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}", this.options.maxFiles)), this.emit("maxfilesexceeded", i)) : this.options.accept.call(this, i, n) : n(this.options.dictInvalidFileType) } }, { key: "addFile", value: function e(i) { var n = this; i.upload = { uuid: t.uuidv4(), progress: 0, total: i.size, bytesSent: 0, filename: this._renameFile(i) }, this.files.push(i), i.status = t.ADDED, this.emit("addedfile", i), this._enqueueThumbnail(i), this.accept(i, function (e) { e ? (i.accepted = !1, n._errorProcessing([i], e)) : (i.accepted = !0, n.options.autoQueue && n.enqueueFile(i)), n._updateMaxFilesReachedClass() }) } }, { key: "enqueueFiles", value: function e(t) { var i = !0, n = !1, r = void 0; try { for (var o, a = t[Symbol.iterator](); !(i = (o = a.next()).done); i = !0) { var l = o.value; this.enqueueFile(l) } } catch (s) { n = !0, r = s } finally { try { i || null == a.return || a.return() } finally { if (n) throw r } } return null } }, { key: "enqueueFile", value: function e(i) { var n = this; if (i.status === t.ADDED && !0 === i.accepted) { if (i.status = t.QUEUED, this.options.autoProcessQueue) return setTimeout(function () { return n.processQueue() }, 0) } else throw Error("This file can't be queued because it has already been processed or was rejected.") } }, { key: "_enqueueThumbnail", value: function e(t) { var i = this; if (this.options.createImageThumbnails && t.type.match(/image.*/) && t.size <= 1048576 * this.options.maxThumbnailFilesize) return this._thumbnailQueue.push(t), setTimeout(function () { return i._processThumbnailQueue() }, 0) } }, { key: "_processThumbnailQueue", value: function e() { var t = this; if (!this._processingThumbnail && 0 !== this._thumbnailQueue.length) { this._processingThumbnail = !0; var i = this._thumbnailQueue.shift(); return this.createThumbnail(i, this.options.thumbnailWidth, this.options.thumbnailHeight, this.options.thumbnailMethod, !0, function (e) { return t.emit("thumbnail", i, e), t._processingThumbnail = !1, t._processThumbnailQueue() }) } } }, { key: "removeFile", value: function e(i) { if (i.status === t.UPLOADING && this.cancelUpload(i), this.files = without(this.files, i), this.emit("removedfile", i), 0 === this.files.length) return this.emit("reset") } }, { key: "removeAllFiles", value: function e(i) { null == i && (i = !1); var n = !0, r = !1, o = void 0; try { for (var a, l = this.files.slice()[Symbol.iterator](); !(n = (a = l.next()).done); n = !0) { var s = a.value; (s.status !== t.UPLOADING || i) && this.removeFile(s) } } catch (u) { r = !0, o = u } finally { try { n || null == l.return || l.return() } finally { if (r) throw o } } return null } }, { key: "resizeImage", value: function e(i, n, r, o, a) { var l = this; return this.createThumbnail(i, n, r, o, !0, function (e, n) { if (null == n) return a(i); var r = l.options.resizeMimeType; null == r && (r = i.type); var o = n.toDataURL(r, l.options.resizeQuality); return ("image/jpeg" === r || "image/jpg" === r) && (o = ExifRestore.restore(i.dataURL, o)), a(t.dataURItoBlob(o)) }) } }, { key: "createThumbnail", value: function e(t, i, n, r, o, a) { var l = this, s = new FileReader; s.onload = function () { if (t.dataURL = s.result, "image/svg+xml" === t.type) { null != a && a(s.result); return } l.createThumbnailFromUrl(t, i, n, r, o, a) }, s.readAsDataURL(t) } }, { key: "displayExistingFile", value: function e(t, i, n, r) { var o = this, a = !(arguments.length > 4) || void 0 === arguments[4] || arguments[4]; if (this.emit("addedfile", t), this.emit("complete", t), a) { var l = function e(i) { o.emit("thumbnail", t, i), n && n() }; t.dataURL = i, this.createThumbnailFromUrl(t, this.options.thumbnailWidth, this.options.thumbnailHeight, this.options.resizeMethod, this.options.fixOrientation, l, r) } else this.emit("thumbnail", t, i), n && n() } }, { key: "createThumbnailFromUrl", value: function e(t, i, n, r, o, a, l) { var s = this, u = document.createElement("img"); return l && (u.crossOrigin = l), u.onload = function () { var e = function e(t) { return t(1) }; return "undefined" != typeof EXIF && null !== EXIF && o && (e = function e(t) { return EXIF.getData(u, function () { return t(EXIF.getTag(this, "Orientation")) }) }), e(function (e) { t.width = u.width, t.height = u.height; var o = s.options.resize.call(s, t, i, n, r), l = document.createElement("canvas"), c = l.getContext("2d"); switch (l.width = o.trgWidth, l.height = o.trgHeight, e > 4 && (l.width = o.trgHeight, l.height = o.trgWidth), e) { case 2: c.translate(l.width, 0), c.scale(-1, 1); break; case 3: c.translate(l.width, l.height), c.rotate(Math.PI); break; case 4: c.translate(0, l.height), c.scale(1, -1); break; case 5: c.rotate(.5 * Math.PI), c.scale(1, -1); break; case 6: c.rotate(.5 * Math.PI), c.translate(0, -l.width); break; case 7: c.rotate(.5 * Math.PI), c.translate(l.height, -l.width), c.scale(-1, 1); break; case 8: c.rotate(-.5 * Math.PI), c.translate(-l.height, 0) }drawImageIOSFix(c, u, null != o.srcX ? o.srcX : 0, null != o.srcY ? o.srcY : 0, o.srcWidth, o.srcHeight, null != o.trgX ? o.trgX : 0, null != o.trgY ? o.trgY : 0, o.trgWidth, o.trgHeight); var d = l.toDataURL("image/png"); if (null != a) return a(d, l) }) }, null != a && (u.onerror = a), u.src = t.dataURL } }, { key: "processQueue", value: function e() { var t = this.options.parallelUploads, i = this.getUploadingFiles().length, n = i; if (!(i >= t)) { var r = this.getQueuedFiles(); if (r.length > 0) { if (this.options.uploadMultiple) return this.processFiles(r.slice(0, t - i)); for (; n < t;) { if (!r.length) return; this.processFile(r.shift()), n++ } } } } }, { key: "processFile", value: function e(t) { return this.processFiles([t]) } }, { key: "processFiles", value: function e(i) { var n = !0, r = !1, o = void 0; try { for (var a, l = i[Symbol.iterator](); !(n = (a = l.next()).done); n = !0) { var s = a.value; s.processing = !0, s.status = t.UPLOADING, this.emit("processing", s) } } catch (u) { r = !0, o = u } finally { try { n || null == l.return || l.return() } finally { if (r) throw o } } return this.options.uploadMultiple && this.emit("processingmultiple", i), this.uploadFiles(i) } }, { key: "_getFilesWithXhr", value: function e(t) { return this.files.filter(function (e) { return e.xhr === t }).map(function (e) { return e }) } }, { key: "cancelUpload", value: function e(i) { if (i.status === t.UPLOADING) { var n = this._getFilesWithXhr(i.xhr), r = !0, o = !1, a = void 0; try { for (var l, s = n[Symbol.iterator](); !(r = (l = s.next()).done); r = !0)l.value.status = t.CANCELED } catch (u) { o = !0, a = u } finally { try { r || null == s.return || s.return() } finally { if (o) throw a } } void 0 !== i.xhr && i.xhr.abort(); var c = !0, d = !1, p = void 0; try { for (var h, f = n[Symbol.iterator](); !(c = (h = f.next()).done); c = !0) { var v = h.value; this.emit("canceled", v) } } catch (m) { d = !0, p = m } finally { try { c || null == f.return || f.return() } finally { if (d) throw p } } this.options.uploadMultiple && this.emit("canceledmultiple", n) } else (i.status === t.ADDED || i.status === t.QUEUED) && (i.status = t.CANCELED, this.emit("canceled", i), this.options.uploadMultiple && this.emit("canceledmultiple", [i])); if (this.options.autoProcessQueue) return this.processQueue() } }, { key: "resolveOption", value: function e(t) { if ("function" == typeof t) { for (var i = arguments.length, n = Array(i > 1 ? i - 1 : 0), r = 1; r < i; r++)n[r - 1] = arguments[r]; return t.apply(this, n) } return t } }, { key: "uploadFile", value: function e(t) { return this.uploadFiles([t]) } }, { key: "uploadFiles", value: function e(i) { var n = this; this._transformFiles(i, function (e) { if (n.options.chunking) { var r = e[0]; i[0].upload.chunked = n.options.chunking && (n.options.forceChunking || r.size > n.options.chunkSize), i[0].upload.totalChunkCount = Math.ceil(r.size / n.options.chunkSize) } if (i[0].upload.chunked) { var o = i[0], a = e[0], l = 0; o.upload.chunks = []; var s = function e() { for (var r = 0; void 0 !== o.upload.chunks[r];)r++; if (!(r >= o.upload.totalChunkCount)) { l++; var s = r * n.options.chunkSize, u = Math.min(s + n.options.chunkSize, o.size), c = { name: n._getParamName(0), data: a.webkitSlice ? a.webkitSlice(s, u) : a.slice(s, u), filename: o.upload.filename, chunkIndex: r }; o.upload.chunks[r] = { file: o, index: r, dataBlock: c, status: t.UPLOADING, progress: 0, retries: 0 }, n._uploadData(i, [c]) } }; if (o.upload.finishedChunkUpload = function (e) { var r = !0; e.status = t.SUCCESS, e.dataBlock = null, e.xhr = null; for (var a = 0; a < o.upload.totalChunkCount; a++) { if (void 0 === o.upload.chunks[a]) return s(); o.upload.chunks[a].status !== t.SUCCESS && (r = !1) } r && n.options.chunksUploaded(o, function () { n._finished(i, "", null) }) }, n.options.parallelChunkUploads) for (var u = 0; u < o.upload.totalChunkCount; u++)s(); else s() } else { for (var c = [], d = 0; d < i.length; d++)c[d] = { name: n._getParamName(d), data: e[d], filename: i[d].upload.filename }; n._uploadData(i, c) } }) } }, { key: "_getChunk", value: function e(t, i) { for (var n = 0; n < t.upload.totalChunkCount; n++)if (void 0 !== t.upload.chunks[n] && t.upload.chunks[n].xhr === i) return t.upload.chunks[n] } }, { key: "_uploadData", value: function e(i, n) { var r = this, o = new XMLHttpRequest, a = !0, l = !1, s = void 0; try { for (var u, c = i[Symbol.iterator](); !(a = (u = c.next()).done); a = !0)u.value.xhr = o } catch (d) { l = !0, s = d } finally { try { a || null == c.return || c.return() } finally { if (l) throw s } } i[0].upload.chunked && (i[0].upload.chunks[n[0].chunkIndex].xhr = o); var p = this.resolveOption(this.options.method, i), h = this.resolveOption(this.options.url, i); o.open(p, h, !0), o.timeout = this.resolveOption(this.options.timeout, i), o.withCredentials = !!this.options.withCredentials, o.onload = function (e) { r._finishedUploading(i, o, e) }, o.ontimeout = function () { r._handleUploadError(i, o, "Request timedout after ".concat(r.options.timeout, " seconds")) }, o.onerror = function () { r._handleUploadError(i, o) }, (null != o.upload ? o.upload : o).onprogress = function (e) { return r._updateFilesUploadProgress(i, o, e) }; var f = { Accept: "application/json", "Cache-Control": "no-cache", "X-Requested-With": "XMLHttpRequest" }; for (var v in this.options.headers && t.extend(f, this.options.headers), f) { var m = f[v]; m && o.setRequestHeader(v, m) } var $ = new FormData; if (this.options.params) { var y = this.options.params; for (var g in "function" == typeof y && (y = y.call(this, i, o, i[0].upload.chunked ? this._getChunk(i[0], o) : null)), y) { var _ = y[g]; $.append(g, _) } } var k = !0, b = !1, F = void 0; try { for (var x, z = i[Symbol.iterator](); !(k = (x = z.next()).done); k = !0) { var w = x.value; this.emit("sending", w, o, $) } } catch (E) { b = !0, F = E } finally { try { k || null == z.return || z.return() } finally { if (b) throw F } } this.options.uploadMultiple && this.emit("sendingmultiple", i, o, $), this._addFormElementData($); for (var C = 0; C < n.length; C++) { var D = n[C]; $.append(D.name, D.data, D.filename) } this.submitRequest(o, $, i) } }, { key: "_transformFiles", value: function e(t, i) { for (var n = this, r = [], o = 0, a = function e(a) { n.options.transformFile.call(n, t[a], function (e) { r[a] = e, ++o === t.length && i(r) }) }, l = 0; l < t.length; l++)a(l) } }, { key: "_addFormElementData", value: function e(t) { if ("FORM" === this.element.tagName) { var i = !0, n = !1, r = void 0; try { for (var o, a = this.element.querySelectorAll("input, textarea, select, button")[Symbol.iterator](); !(i = (o = a.next()).done); i = !0) { var l = o.value, s = l.getAttribute("name"), u = l.getAttribute("type"); if (u && (u = u.toLowerCase()), null != s) { if ("SELECT" === l.tagName && l.hasAttribute("multiple")) { var c = !0, d = !1, p = void 0; try { for (var h, f = l.options[Symbol.iterator](); !(c = (h = f.next()).done); c = !0) { var v = h.value; v.selected && t.append(s, v.value) } } catch (m) { d = !0, p = m } finally { try { c || null == f.return || f.return() } finally { if (d) throw p } } } else (!u || "checkbox" !== u && "radio" !== u || l.checked) && t.append(s, l.value) } } } catch ($) { n = !0, r = $ } finally { try { i || null == a.return || a.return() } finally { if (n) throw r } } } } }, { key: "_updateFilesUploadProgress", value: function e(t, i, n) { var r; if (void 0 !== n) { if (r = 100 * n.loaded / n.total, t[0].upload.chunked) { var o = t[0], a = this._getChunk(o, i); a.progress = r, a.total = n.total, a.bytesSent = n.loaded, o.upload.progress = 0, o.upload.total = 0, o.upload.bytesSent = 0; for (var l = 0; l < o.upload.totalChunkCount; l++)void 0 !== o.upload.chunks[l] && void 0 !== o.upload.chunks[l].progress && (o.upload.progress += o.upload.chunks[l].progress, o.upload.total += o.upload.chunks[l].total, o.upload.bytesSent += o.upload.chunks[l].bytesSent); o.upload.progress = o.upload.progress / o.upload.totalChunkCount } else { var s = !0, u = !1, c = void 0; try { for (var d, p = t[Symbol.iterator](); !(s = (d = p.next()).done); s = !0) { var h = d.value; h.upload.progress = r, h.upload.total = n.total, h.upload.bytesSent = n.loaded } } catch (f) { u = !0, c = f } finally { try { s || null == p.return || p.return() } finally { if (u) throw c } } } var v = !0, m = !1, $ = void 0; try { for (var y, g = t[Symbol.iterator](); !(v = (y = g.next()).done); v = !0) { var _ = y.value; this.emit("uploadprogress", _, _.upload.progress, _.upload.bytesSent) } } catch (k) { m = !0, $ = k } finally { try { v || null == g.return || g.return() } finally { if (m) throw $ } } } else { var b = !0; r = 100; var F = !0, x = !1, z = void 0; try { for (var w, E = t[Symbol.iterator](); !(F = (w = E.next()).done); F = !0) { var C = w.value; (100 !== C.upload.progress || C.upload.bytesSent !== C.upload.total) && (b = !1), C.upload.progress = r, C.upload.bytesSent = C.upload.total } } catch (D) { x = !0, z = D } finally { try { F || null == E.return || E.return() } finally { if (x) throw z } } if (b) return; var L = !0, T = !1, S = void 0; try { for (var U, A = t[Symbol.iterator](); !(L = (U = A.next()).done); L = !0) { var I = U.value; this.emit("uploadprogress", I, r, I.upload.bytesSent) } } catch (R) { T = !0, S = R } finally { try { L || null == A.return || A.return() } finally { if (T) throw S } } } } }, { key: "_finishedUploading", value: function e(i, n, r) { var o; if (i[0].status !== t.CANCELED && 4 === n.readyState) { if ("arraybuffer" !== n.responseType && "blob" !== n.responseType && (o = n.responseText, n.getResponseHeader("content-type") && ~n.getResponseHeader("content-type").indexOf("application/json"))) try { o = JSON.parse(o) } catch (a) { r = a, o = "Invalid JSON response from server." } this._updateFilesUploadProgress(i), 200 <= n.status && n.status < 300 ? i[0].upload.chunked ? i[0].upload.finishedChunkUpload(this._getChunk(i[0], n)) : this._finished(i, o, r) : this._handleUploadError(i, n, o) } } }, { key: "_handleUploadError", value: function e(i, n, r) { if (i[0].status !== t.CANCELED) { if (i[0].upload.chunked && this.options.retryChunks) { var o = this._getChunk(i[0], n); if (o.retries++ < this.options.retryChunksLimit) { this._uploadData(i, [o.dataBlock]); return } console.warn("Retried this chunk too often. Giving up.") } this._errorProcessing(i, r || this.options.dictResponseError.replace("{{statusCode}}", n.status), n) } } }, { key: "submitRequest", value: function e(t, i, n) { t.send(i) } }, { key: "_finished", value: function e(i, n, r) { var o = !0, a = !1, l = void 0; try { for (var s, u = i[Symbol.iterator](); !(o = (s = u.next()).done); o = !0) { var c = s.value; c.status = t.SUCCESS, this.emit("success", c, n, r), this.emit("complete", c) } } catch (d) { a = !0, l = d } finally { try { o || null == u.return || u.return() } finally { if (a) throw l } } if (this.options.uploadMultiple && (this.emit("successmultiple", i, n, r), this.emit("completemultiple", i)), this.options.autoProcessQueue) return this.processQueue() } }, { key: "_errorProcessing", value: function e(i, n, r) { var o = !0, a = !1, l = void 0; try { for (var s, u = i[Symbol.iterator](); !(o = (s = u.next()).done); o = !0) { var c = s.value; c.status = t.ERROR, this.emit("error", c, n, r), this.emit("complete", c) } } catch (d) { a = !0, l = d } finally { try { o || null == u.return || u.return() } finally { if (a) throw l } } if (this.options.uploadMultiple && (this.emit("errormultiple", i, n, r), this.emit("completemultiple", i)), this.options.autoProcessQueue) return this.processQueue() } }], [{ key: "uuidv4", value: function e() { return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function (e) { var t = 16 * Math.random() | 0; return ("x" === e ? t : 3 & t | 8).toString(16) }) } }]), t }(Emitter); Dropzone.initClass(), Dropzone.version = "5.7.0", Dropzone.options = {}, Dropzone.optionsForElement = function (e) { return e.getAttribute("id") ? Dropzone.options[camelize(e.getAttribute("id"))] : void 0 }, Dropzone.instances = [], Dropzone.forElement = function (e) { if ("string" == typeof e && (e = document.querySelector(e)), (null != e ? e.dropzone : void 0) == null) throw Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone."); return e.dropzone }, Dropzone.autoDiscover = !0, Dropzone.discover = function () { var e; if (document.querySelectorAll) e = document.querySelectorAll(".dropzone"); else { e = []; var t = function t(i) { return function () { var t = [], n = !0, r = !1, o = void 0; try { for (var a, l = i[Symbol.iterator](); !(n = (a = l.next()).done); n = !0) { var s = a.value; /(^| )dropzone($| )/.test(s.className) ? t.push(e.push(s)) : t.push(void 0) } } catch (u) { r = !0, o = u } finally { try { n || null == l.return || l.return() } finally { if (r) throw o } } return t }() }; t(document.getElementsByTagName("div")), t(document.getElementsByTagName("form")) } return function () { var t = [], i = !0, n = !1, r = void 0; try { for (var o, a = e[Symbol.iterator](); !(i = (o = a.next()).done); i = !0) { var l = o.value; !1 !== Dropzone.optionsForElement(l) ? t.push(new Dropzone(l)) : t.push(void 0) } } catch (s) { n = !0, r = s } finally { try { i || null == a.return || a.return() } finally { if (n) throw r } } return t }() }, Dropzone.blacklistedBrowsers = [/opera.*(Macintosh|Windows Phone).*version\/12/i], Dropzone.isBrowserSupported = function () { var e = !0; if (window.File && window.FileReader && window.FileList && window.Blob && window.FormData && document.querySelector) { if ("classList" in document.createElement("a")) { var t = !0, i = !1, n = void 0; try { for (var r, o = Dropzone.blacklistedBrowsers[Symbol.iterator](); !(t = (r = o.next()).done); t = !0)if (r.value.test(navigator.userAgent)) { e = !1; continue } } catch (a) { i = !0, n = a } finally { try { t || null == o.return || o.return() } finally { if (i) throw n } } } else e = !1 } else e = !1; return e }, Dropzone.dataURItoBlob = function (e) { for (var t = atob(e.split(",")[1]), i = e.split(",")[0].split(":")[1].split(";")[0], n = new ArrayBuffer(t.length), r = new Uint8Array(n), o = 0, a = t.length, l = 0 <= a; l ? o <= a : o >= a; l ? o++ : o--)r[o] = t.charCodeAt(o); return new Blob([n], { type: i }) }; var without = function e(t, i) { return t.filter(function (e) { return e !== i }).map(function (e) { return e }) }, camelize = function e(t) { return t.replace(/[\-_](\w)/g, function (e) { return e.charAt(1).toUpperCase() }) }; Dropzone.createElement = function (e) { var t = document.createElement("div"); return t.innerHTML = e, t.childNodes[0] }, Dropzone.elementInside = function (e, t) { if (e === t) return !0; for (; e = e.parentNode;)if (e === t) return !0; return !1 }, Dropzone.getElement = function (e, t) { var i; if ("string" == typeof e ? i = document.querySelector(e) : null != e.nodeType && (i = e), null == i) throw Error("Invalid `".concat(t, "` option provided. Please provide a CSS selector or a plain HTML element.")); return i }, Dropzone.getElements = function (e, t) { var i, n; if (e instanceof Array) { n = []; try { var r = !0, o = !1, a = void 0; try { for (var l, s = e[Symbol.iterator](); !(r = (l = s.next()).done); r = !0)i = l.value, n.push(this.getElement(i, t)) } catch (u) { o = !0, a = u } finally { try { r || null == s.return || s.return() } finally { if (o) throw a } } } catch (c) { n = null } } else if ("string" == typeof e) { n = []; var d = !0, p = !1, h = void 0; try { for (var f, v = document.querySelectorAll(e)[Symbol.iterator](); !(d = (f = v.next()).done); d = !0)i = f.value, n.push(i) } catch (m) { p = !0, h = m } finally { try { d || null == v.return || v.return() } finally { if (p) throw h } } } else null != e.nodeType && (n = [e]); if (null == n || !n.length) throw Error("Invalid `".concat(t, "` option provided. Please provide a CSS selector, a plain HTML element or a list of those.")); return n }, Dropzone.confirm = function (e, t, i) { return window.confirm(e) ? t() : null != i ? i() : void 0 }, Dropzone.isValidFile = function (e, t) { if (!t) return !0; t = t.split(","); var i = e.type, n = i.replace(/\/.*$/, ""), r = !0, o = !1, a = void 0; try { for (var l, s = t[Symbol.iterator](); !(r = (l = s.next()).done); r = !0) { var u = l.value; if (u = u.trim(), "." === u.charAt(0)) { if (-1 !== e.name.toLowerCase().indexOf(u.toLowerCase(), e.name.length - u.length)) return !0 } else if (/\/\*$/.test(u)) { if (n === u.replace(/\/.*$/, "")) return !0 } else if (i === u) return !0 } } catch (c) { o = !0, a = c } finally { try { r || null == s.return || s.return() } finally { if (o) throw a } } return !1 }, "undefined" != typeof jQuery && null !== jQuery && (jQuery.fn.dropzone = function (e) { return this.each(function () { return new Dropzone(this, e) }) }), "undefined" != typeof module && null !== module ? module.exports = Dropzone : window.Dropzone = Dropzone, Dropzone.ADDED = "added", Dropzone.QUEUED = "queued", Dropzone.ACCEPTED = Dropzone.QUEUED, Dropzone.UPLOADING = "uploading", Dropzone.PROCESSING = Dropzone.UPLOADING, Dropzone.CANCELED = "canceled", Dropzone.ERROR = "error", Dropzone.SUCCESS = "success"; var detectVerticalSquash = function e(t) { t.naturalWidth; var i = t.naturalHeight, n = document.createElement("canvas"); n.width = 1, n.height = i; var r = n.getContext("2d"); r.drawImage(t, 0, 0); for (var o = r.getImageData(1, 0, 1, i).data, a = 0, l = i, s = i; s > a;)0 === o[(s - 1) * 4 + 3] ? l = s : a = s, s = l + a >> 1; var u = s / i; return 0 === u ? 1 : u }, drawImageIOSFix = function e(t, i, n, r, o, a, l, s, u, c) { var d = detectVerticalSquash(i); return t.drawImage(i, n, r, o, a, l, s, u, c / d) }, ExifRestore = function () { function e() { _classCallCheck(this, e) } return _createClass(e, null, [{ key: "initClass", value: function e() { this.KEY_STR = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=" } }, { key: "encode64", value: function e(t) { for (var i = "", n = void 0, r = void 0, o = "", a = void 0, l = void 0, s = void 0, u = "", c = 0; n = t[c++], r = t[c++], o = t[c++], a = n >> 2, l = (3 & n) << 4 | r >> 4, s = (15 & r) << 2 | o >> 6, u = 63 & o, isNaN(r) ? s = u = 64 : isNaN(o) && (u = 64), i = i + this.KEY_STR.charAt(a) + this.KEY_STR.charAt(l) + this.KEY_STR.charAt(s) + this.KEY_STR.charAt(u), n = r = o = "", a = l = s = u = "", c < t.length;); return i } }, { key: "restore", value: function e(t, i) { if (!t.match("data:image/jpeg;base64,")) return i; var n = this.decode64(t.replace("data:image/jpeg;base64,", "")), r = this.slice2Segments(n), o = this.exifManipulation(i, r); return "data:image/jpeg;base64,".concat(this.encode64(o)) } }, { key: "exifManipulation", value: function e(t, i) { var n = this.getExifArray(i), r = this.insertExif(t, n); return new Uint8Array(r) } }, { key: "getExifArray", value: function e(t) { for (var i = void 0, n = 0; n < t.length;) { if (255 === (i = t[n])[0] & 225 === i[1]) return i; n++ } return [] } }, { key: "insertExif", value: function e(t, i) { var n = t.replace("data:image/jpeg;base64,", ""), r = this.decode64(n), o = r.indexOf(255, 3), a = r.slice(0, o), l = r.slice(o), s = a; return (s = s.concat(i)).concat(l) } }, { key: "slice2Segments", value: function e(t) { for (var i, n = 0, r = []; !(255 === t[n] & 218 === t[n + 1]);) { if (255 === t[n] & 216 === t[n + 1]) n += 2; else { i = 256 * t[n + 2] + t[n + 3]; var o = n + i + 2, a = t.slice(n, o); r.push(a), n = o } if (n > t.length) break } return r } }, { key: "decode64", value: function e(t) { var i = void 0, n = void 0, r = "", o = void 0, a = void 0, l = void 0, s = "", u = 0, c = []; for (/[^A-Za-z0-9\+\/\=]/g.exec(t) && console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."), t = t.replace(/[^A-Za-z0-9\+\/\=]/g, ""); o = this.KEY_STR.indexOf(t.charAt(u++)), a = this.KEY_STR.indexOf(t.charAt(u++)), l = this.KEY_STR.indexOf(t.charAt(u++)), s = this.KEY_STR.indexOf(t.charAt(u++)), i = o << 2 | a >> 4, n = (15 & a) << 4 | l >> 2, r = (3 & l) << 6 | s, c.push(i), 64 !== l && c.push(n), 64 !== s && c.push(r), i = n = r = "", o = a = l = s = "", u < t.length;); return c } }]), e }(); ExifRestore.initClass(); var contentLoaded = function e(t, i) { var n = !1, r = !0, o = t.document, a = o.documentElement, l = o.addEventListener ? "addEventListener" : "attachEvent", s = o.addEventListener ? "removeEventListener" : "detachEvent", u = o.addEventListener ? "" : "on", c = function e(r) { if (("readystatechange" !== r.type || "complete" === o.readyState) && (("load" === r.type ? t : o)[s](u + r.type, e, !1), !n && (n = !0))) return i.call(t, r.type || r) }; if ("complete" !== o.readyState) { if (o.createEventObject && a.doScroll) { try { r = !t.frameElement } catch (d) { } r && function e() { try { a.doScroll("left") } catch (t) { setTimeout(e, 50); return } return c("poll") }() } return o[l](u + "DOMContentLoaded", c, !1), o[l](u + "readystatechange", c, !1), t[l](u + "load", c, !1) } }; function __guard__(e, t) { return null != e ? t(e) : void 0 } function __guardMethod__(e, t, i) { return null != e && "function" == typeof e[t] ? i(e, t) : void 0 } Dropzone._autoDiscoverFunction = function () { if (Dropzone.autoDiscover) return Dropzone.discover() }, contentLoaded(window, Dropzone._autoDiscoverFunction);