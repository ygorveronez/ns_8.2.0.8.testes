<style>
    .label-campo {
        display: block;
        font-size: 0.85rem;
        color: #aeaeae;
        text-transform: uppercase;
        font-weight: bold;
    }
    .valor-campo {
        font-size: 0.90rem;
    }
    #divModalDetalhesTorre .modal-dialog {
        width: 1200px !important;
        max-width: 1200px !important;
    }
    .titulo-secao {
        font-size: 1.25rem;
        font-weight: bolder;
        margin-top: 0.75rem;
        margin-bottom: 0.75rem;
    }
    #divModalDetalhesTorre .modal-content {
        height: 770px;
        max-height: 800px;
    }
    .col-pequeno {
        flex: 0 0 auto;
        width: 6%;
    }
    .col-nome {
        flex: 0 0 auto;
        width: 13%;
    }
    .col-data {
        flex: 0 0 auto;
        width: 13.2%;
    }
    .col-telefone {
        flex: 0 0 auto;
        width: 11.1%;
    }
    .col-grande {
        flex: 0 0 auto;
        width: 17%;
    }
    .col-muito-grande {
        flex: 0 0 auto;
        width: 18%;
    }
    .accordion-button {
        display: flex;
        justify-content: flex-start;
        align-items: center;
        text-align: left;
        width: 100%;
        padding-left: 2.5rem;
        font-size: 1.125rem;
        font-weight: bold;
        color: #787878;
    }

        .accordion-button::after {
            order: -1;
            margin-right: 1rem;
            margin-left: 0;
            position: absolute;
            left: 1rem;
        }

    .accordion-header {
        position: relative;
    }

    .accordion-header,
    .accordion-collapse {
        border-radius: 0 !important;
    }

    .accordion-button::after {
        font-size: 1rem;
        font-weight: bold;
        color: #787878;
        order: -1;
        margin-right: 1rem;
        position: absolute;
        left: 1rem;
    }

    .accordion-button:not(.collapsed) {
        background-color: transparent;
        color: #787878;
        box-shadow: none;
    }

    .accordion-button:focus {
        box-shadow: none;
        border-color: transparent;
        outline: none;
    }
    .switch-danger:checked {
        background-color: #ff4c4c;
        border-color: #ff4c4c;
    }

    .switch-danger:focus {
        box-shadow: 0 0 0 0.25rem rgba(255, 76, 76, 0.25);
    }

    .text-danger-custom {
        color: #ff4c4c !important;
    }

    .form-check.form-switch {
        display: flex;
        align-items: center;
        gap: 0.75rem;
    }

    .form-check-input {
        margin-top: 0 !important;
    }

    .icone-ignicao {
        width: 1.5em;
        font-size: 1.6em;
        align-content: center;
        float: right;
    }

    .icone-rastreador {
        width: 1.5em;
        font-size: 1.6em;
        align-content: center;
        float: right;
    }
</style>
<div id="knockoutDetalhesTorre">
    <div class="modal fade" id="divModalDetalhesTorre" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title data-bind="text: DetalhesTorre.text"></h3>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>

                <div class="modal-body pt-0">
                    <ul class="nav nav-tabs" style="cursor: pointer">
                        <li class="nav-item"><a class="nav-link active" data-bs-toggle="tab" href="#tabResumo" data-bind="text: Resumo.text"></a></li>
                        <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#tabParadas" data-bind="text: Paradas.text"></a></li>
                        <li style="display: none;" class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#tabHistorico" data-bind="text: HistoricoPosicoes.text"></a></li><!-- deixar escondido até #66505 -->
                        <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#tabGraficos" data-bind="text: Graficos.text"></a></li>
                        <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#tabLinhaTempo" data-bind="text: LinhaTempo.text"></a></li>
                    </ul>

                    <div class="tab-content border border-top-0 p-3 mt-0 bg-white">
                        <div class="tab-pane fade show active" id="tabResumo">
                            <h5 class="titulo-secao" data-bind="text: Monitoramento.text"></h5>
                            <div class="row">
                                <div class="col-pequeno"><label class="label-campo" data-bind="text: Codigo.text"></label><span class="valor-campo" data-bind="text: Codigo.val"></span></div>
                                <div class="col-nome"><label class="label-campo" data-bind="text: MotoristaNome.text"></label><span class="valor-campo" data-bind="text: MotoristaNome.val"></span></div>
                                <div class="col-telefone"><label class="label-campo" data-bind="text: MotoristaTelefone.text"></label><span class="valor-campo" data-bind="text: MotoristaTelefone.val"></span></div>
                                <div class="col-data"><label class="label-campo" data-bind="text: InicioMonitoramento.text"></label><span class="valor-campo" data-bind="text: InicioMonitoramento.val"></span></div>
                                <div class="col-data"><label class="label-campo" data-bind="text: FimMonitoramento.text"></label><span class="valor-campo" data-bind="text: FimMonitoramento.val"></span></div>
                                <div class="col-md-1"><label class="label-campo" data-bind="text: Veiculo.text"></label><span class="valor-campo" data-bind="text: Veiculo.val"></span></div>
                                <div class="col-telefone"><label class="label-campo" data-bind="text: MotoristaCPF.text"></label><span class="valor-campo" data-bind="text: MotoristaCPF.val"></span></div>
                                <div class="col-md-1"><label class="label-campo" data-bind="text: Tecnologia.text"></label><span class="valor-campo" data-bind="text: Tecnologia.val"></span></div>
                                <div class="icone-rastreador" id="iconeRastreador"></div>
                                <div class="col-nome"><label class="label-campo" data-bind="text: RastreadorStatus.text"></label><span class="valor-campo" data-bind="text: RastreadorStatus.val"></span></div>
                            </div>

                            <h5 class="titulo-secao" data-bind="text: PosicaoAtual.text"></h5>
                            <div class="row">
                                <div class="col-data"><label class="label-campo" data-bind="text: PrimeiraPosicao.text"></label><span class="valor-campo" data-bind="text: PrimeiraPosicao.val"></span></div>
                                <div class="col-md-1"><label class="label-campo" data-bind="text: Velocidade.text"></label><span class="valor-campo" data-bind="text: Velocidade.val"></span></div>
                                <div class="col-grande"><label class="label-campo" data-bind="text: Localizacao.text"></label><span class="valor-campo" data-bind="text: Localizacao.val"></span></div>
                                <!--<div class="col-md-1"><label class="label-campo" data-bind="text: Cidade.text"></label><span class="valor-campo" data-bind="text: Cidade.val"></span></div>-->
                                <div class="col-data"><label class="label-campo" data-bind="text: DataPosicao.text"></label><span class="valor-campo" data-bind="text: DataPosicao.val"></span></div>
                                <div class="col-telefone"><label class="label-campo" data-bind="text: Temperatura.text"></label><span class="valor-campo" data-bind="text: Temperatura.val"></span></div>
                                <i class="fa fam fa-power-off icone-ignicao" style="color: rgb(52, 152, 219);"></i>
                                <div class="col-md-2"><label class="label-campo" data-bind="text: Ignicao.text"></label><span class="valor-campo" data-bind="text: Ignicao.val"></span></div>
                            </div>

                            <h5 class="titulo-secao" data-bind="text: SituacaoViagem.text"></h5>
                            <div class="row">
                                <div class="col-md-12 mb-2 row">
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label class="form-label" data-bind="text: Status.text, attr: { for: Status.id }"></label>
                                            <select class="form-control" data-bind="class: Status.requiredClass, options: Status.options, optionsText: 'Descricao', optionsValue: 'Codigo', value: Status.val, attr: { maxlength: Status.maxlength, id : Status.id }"></select>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label class="form-label" data-bind="text: DataInicialStatus.text, attr: { for: DataInicialStatus.id }"></label>
                                            <input type="text" class="form-control" data-bind="value: DataInicialStatus.val, valueUpdate: 'afterkeydown', attr: { maxlength: DataInicialStatus.maxlength, id : DataInicialStatus.id}" />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-2"><label class="label-campo" data-bind="text: DistanciaRealizada.text"></label><span class="valor-campo" data-bind="text: DistanciaRealizada.val"></span></div>
                                <div class="col-md-2"><label class="label-campo" data-bind="text: DistanciaPrevista.text"></label><span class="valor-campo" data-bind="text: DistanciaPrevista.val"></span></div>
                                <div class="col-muito-grande"><label class="label-campo" data-bind="text: PrevisaoChegada.text"></label><span class="valor-campo" data-bind="text: PrevisaoChegada.val"></span></div>
                                <div class="col-muito-grande"><label class="label-campo" data-bind="text: DistanciaDestino.text"></label><span class="valor-campo" data-bind="text: DistanciaDestino.val"></span></div>
                            </div>

                            <div class="form-check form-switch mt-2">
                                <input class="form-check-input switch-danger" type="checkbox"
                                       data-bind="checked: MonitoramentoCritico.val">
                                <label class="form-check-label font-weight-bolder fs-4"
                                       data-bind="text: MonitoramentoCritico.text, css: { 'text-danger-custom': MonitoramentoCritico.val }">
                                </label>
                            </div>

                            <div class="form-group mt-2">
                                <label class="label-campo" data-bind="text: Observacao.text"></label>
                                <textarea class="form-control" rows="2" data-bind="value: Observacao.val"></textarea>
                            </div>

                            <div class="d-flex justify-content-end gap-2 mt-3">
                                <button class="btn btn-light shadow-0" data-bind="click: Auditar.eventClick, text: Auditar.text"></button>
                                <button class="btn btn-outline-dark" data-bind="click: FinalizarViagem.eventClick, text: FinalizarViagem.text"></button>
                                <button class="btn btn-dark" data-bind="click: SalvarAlteracoes.eventClick, text: SalvarAlteracoes.text"></button>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="tabParadas">
                            <table width="100%" class="table table-bordered table-hover margin-top-0" data-bind="attr: { id: GridParadas.idGrid }" cellspacing="0"></table>
                        </div>
                        <div class="tab-pane fade" id="tabHistorico">
                            <div class="card"><div class="card-body" data-bind="text: HistoricoPosicoes.text"></div></div>
                        </div>
                        <div class="tab-pane fade" id="tabGraficos">
                            <div class="row g-2 mb-3 align-items-end">
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label class="form-label" data-bind="text: DataInicialPosicoes.text, attr: { for: DataInicialPosicoes.id }"></label>
                                        <input type="text" class="form-control" data-bind="value: DataInicialPosicoes.val, valueUpdate: 'afterkeydown', attr: { maxlength: DataInicialPosicoes.maxlength, id : DataInicialPosicoes.id}" />
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label class="form-label" data-bind="text: DataFinalPosicoes.text, attr: { for: DataFinalPosicoes.id }"></label>
                                        <input type="text" class="form-control" data-bind="value: DataFinalPosicoes.val, valueUpdate: 'afterkeydown', attr: { maxlength: DataFinalPosicoes.maxlength, id : DataFinalPosicoes.id}" />
                                    </div>
                                </div>
                                <div class="col-md-1">
                                    <div class="form-group">
                                        <button class="btn btn-dark" data-bind="click: Pesquisar.eventClick, text: Pesquisar.text"  ></button>
                                    </div>
                                </div>
                                <div class="col-md-2 ms-auto">
                                    <div class="form-group">
                                        <select class="form-select" data-bind="value: TipoGrafico.val">
                                            <option value="temperatura" data-bind="text: TemperaturaComUnidade.text"></option>
                                            <option value="velocidade" data-bind="text: VelocidadeComUnidade.text"></option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <canvas id="graficoTemp" height="120"></canvas>
                        </div>
                        <div class="tab-pane fade" id="tabLinhaTempo">
                            <div class="accordion" data-bind="foreach: Historico.val">
                                <div class="accordion-item">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button"
                                                data-bind="click: function() { $parent.toggleItem($data) }, text: Status, attr: { 'aria-expanded': isOpen }, css: { 'collapsed': !isOpen() }">
                                        </button>
                                    </h2>
                                    <div class="accordion-collapse collapse"
                                         data-bind="css: { 'show': isOpen }, visible: isOpen">
                                        <div class="accordion-body">
                                            <div class="row">
                                                <div class="col-md-1"><label class="label-campo">Veiculo</label><span class="valor-campo" data-bind="text: Veiculo"></span></div>
                                                <div class="col-data"><label class="label-campo">Data Início</label><span class="valor-campo" data-bind="text: DataInicio"></span></div>
                                                <div class="col-data"><label class="label-campo">Data Fim</label><span class="valor-campo" data-bind="text: DataFim"></span></div>
                                                <div class="col-md-1"><label class="label-campo">Tempo</label><span class="valor-campo" data-bind="text: Tempo"></span></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>