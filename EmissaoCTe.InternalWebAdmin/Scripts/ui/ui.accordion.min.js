(function(n){n.widget("ui.accordion",{_init:function(){var t=this.options,r=this,i;this.running=0,t.collapsible==n.ui.accordion.defaults.collapsible&&t.alwaysOpen!=n.ui.accordion.defaults.alwaysOpen&&(t.collapsible=!t.alwaysOpen),t.navigation&&(i=this.element.find("a").filter(t.navigationFilter),i.length&&(i.filter(t.header).length?this.active=i:(this.active=i.parent().parent().prev(),i.addClass("ui-accordion-content-active")))),this.element.addClass("ui-accordion ui-widget ui-helper-reset"),this.element[0].nodeName=="UL"&&this.element.children("li").addClass("ui-accordion-li-fix"),this.headers=this.element.find(t.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){n(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){n(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){n(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){n(this).removeClass("ui-state-focus")}),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom"),this.active=this._findActive(this.active||t.active).toggleClass("ui-state-default").toggleClass("ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),this.active.next().addClass("ui-accordion-content-active"),n("<span/>").addClass("ui-icon "+t.icons.header).prependTo(this.headers),this.active.find(".ui-icon").toggleClass(t.icons.header).toggleClass(t.icons.headerSelected),n.browser.msie&&this.element.find("a").css("zoom","1"),this.resize(),this.element.attr("role","tablist"),this.headers.attr("role","tab").bind("keydown",function(n){return r._keydown(n)}).next().attr("role","tabpanel"),this.headers.not(this.active||"").attr("aria-expanded","false").attr("tabIndex","-1").next().hide(),this.active.length?this.active.attr("aria-expanded","true").attr("tabIndex","0"):this.headers.eq(0).attr("tabIndex","0"),n.browser.safari||this.headers.find("a").attr("tabIndex","-1"),t.event&&this.headers.bind(t.event+".accordion",function(n){return r._clickHandler.call(r,n,this)})},destroy:function(){var n=this.options,t;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role").unbind(".accordion").removeData("accordion"),this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("tabindex"),this.headers.find("a").removeAttr("tabindex"),this.headers.children(".ui-icon").remove(),t=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active"),(n.autoHeight||n.fillHeight)&&t.css("height","")},_setData:function(t,i){t=="alwaysOpen"&&(t="collapsible",i=!i),n.widget.prototype._setData.apply(this,arguments)},_keydown:function(t){var e=this.options,i=n.ui.keyCode;if(!e.disabled&&!t.altKey&&!t.ctrlKey){var u=this.headers.length,f=this.headers.index(t.target),r=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:r=this.headers[(f+1)%u];break;case i.LEFT:case i.UP:r=this.headers[(f-1+u)%u];break;case i.SPACE:case i.ENTER:return this._clickHandler({target:t.target},t.target)}return r?(n(t.target).attr("tabIndex","-1"),n(r).attr("tabIndex","0"),r.focus(),!1):!0}},resize:function(){var r=this.options,t,u,i;r.fillSpace?(n.browser.msie&&(u=this.element.parent().css("overflow"),this.element.parent().css("overflow","hidden")),t=this.element.parent().height(),n.browser.msie&&this.element.parent().css("overflow",u),this.headers.each(function(){t-=n(this).outerHeight()}),i=0,this.headers.next().each(function(){i=Math.max(i,n(this).innerHeight()-n(this).height())}).height(Math.max(0,t-i)).css("overflow","auto")):r.autoHeight&&(t=0,this.headers.next().each(function(){t=Math.max(t,n(this).outerHeight())}).height(t))},activate:function(n){var t=this._findActive(n)[0];this._clickHandler({target:t},t)},_findActive:function(t){return t?typeof t=="number"?this.headers.filter(":eq("+t+")"):this.headers.not(this.headers.not(t)):t===!1?n([]):this.headers.filter(":eq(0)")},_clickHandler:function(t,i){var r=this.options,u,f;if(r.disabled)return!1;if(!t.target&&r.collapsible){this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").find(".ui-icon").removeClass(r.icons.headerSelected).addClass(r.icons.header),this.active.next().addClass("ui-accordion-content-active");var e=this.active.next(),s={options:r,newHeader:n([]),oldHeader:r.active,newContent:n([]),oldContent:e},o=this.active=n([]);return this._toggle(o,e,s),!1}if(u=n(t.currentTarget||i),f=u[0]==this.active[0],this.running||!r.collapsible&&f)return!1;this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").find(".ui-icon").removeClass(r.icons.headerSelected).addClass(r.icons.header),this.active.next().addClass("ui-accordion-content-active"),f||(u.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").find(".ui-icon").removeClass(r.icons.header).addClass(r.icons.headerSelected),u.next().addClass("ui-accordion-content-active"));var o=u.next(),e=this.active.next(),s={options:r,newHeader:f&&r.collapsible?n([]):u,oldHeader:this.active,newContent:f&&r.collapsible?n([]):o.find("> *"),oldContent:e.find("> *")},h=this.headers.index(this.active[0])>this.headers.index(u[0]);return this.active=f?n([]):u,this._toggle(o,e,s,f,h),!1},_toggle:function(t,i,r,u,f){var e=this.options,c=this,s,o;if(this.toShow=t,this.toHide=i,this.data=r,s=function(){if(c)return c._completed.apply(c,arguments)},this._trigger("changestart",null,this.data),this.running=i.size()===0?t.size():i.size(),e.animated){o={},o=e.collapsible&&u?{toShow:n([]),toHide:i,complete:s,down:f,autoHeight:e.autoHeight||e.fillSpace}:{toShow:t,toHide:i,complete:s,down:f,autoHeight:e.autoHeight||e.fillSpace},e.proxied||(e.proxied=e.animated),e.proxiedDuration||(e.proxiedDuration=e.duration),e.animated=n.isFunction(e.proxied)?e.proxied(o):e.proxied,e.duration=n.isFunction(e.proxiedDuration)?e.proxiedDuration(o):e.proxiedDuration;var l=n.ui.accordion.animations,a=e.duration,h=e.animated;l[h]||(l[h]=function(n){this.slide(n,{easing:h,duration:a||700})}),l[h](o)}else e.collapsible&&u?t.toggle():(i.hide(),t.show()),s(!0);i.prev().attr("aria-expanded","false").attr("tabIndex","-1").blur(),t.prev().attr("aria-expanded","true").attr("tabIndex","0").focus()},_completed:function(n){var t=this.options;(this.running=n?0:--this.running,this.running)||(t.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this._trigger("change",null,this.data))}}),n.extend(n.ui.accordion,{version:"1.7.2",defaults:{active:null,alwaysOpen:!0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()==location.href.toLowerCase()}},animations:{slide:function(t,i){if(t=n.extend({easing:"swing",duration:300},t,i),!t.toHide.size()){t.toShow.animate({height:"show"},t);return}if(!t.toShow.size()){t.toHide.animate({height:"hide"},t);return}var s=t.toShow.css("overflow"),f,u={},e={},o,r=t.toShow;o=r[0].style.width,r.width(parseInt(r.parent().width(),10)-parseInt(r.css("paddingLeft"),10)-parseInt(r.css("paddingRight"),10)-(parseInt(r.css("borderLeftWidth"),10)||0)-(parseInt(r.css("borderRightWidth"),10)||0)),n.each(["height","paddingTop","paddingBottom"],function(i,r){e[r]="hide";var f=(""+n.css(t.toShow[0],r)).match(/^([\d+-.]+)(.*)$/);u[r]={value:f[1],unit:f[2]||"px"}}),t.toShow.css({height:0,overflow:"hidden"}).show(),t.toHide.filter(":hidden").each(t.complete).end().filter(":visible").animate(e,{step:function(n,i){i.prop=="height"&&(f=(i.now-i.start)/(i.end-i.start)),t.toShow[0].style[i.prop]=f*u[i.prop].value+u[i.prop].unit},duration:t.duration,easing:t.easing,complete:function(){t.autoHeight||t.toShow.css("height",""),t.toShow.css("width",o),t.toShow.css({overflow:s}),t.complete()}})},bounceslide:function(n){this.slide(n,{easing:n.down?"easeOutBounce":"swing",duration:n.down?1e3:200})},easeslide:function(n){this.slide(n,{easing:"easeinout",duration:700})}}})})(jQuery);
//@ sourceMappingURL=ui.accordion.min.js.map