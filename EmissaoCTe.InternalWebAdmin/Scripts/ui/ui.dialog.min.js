(function(n){var t={dragStart:"start.draggable",drag:"drag.draggable",dragStop:"stop.draggable",maxHeight:"maxHeight.resizable",minHeight:"minHeight.resizable",maxWidth:"maxWidth.resizable",minWidth:"minWidth.resizable",resizeStart:"start.resizable",resize:"drag.resizable",resizeStop:"stop.resizable"},i="ui-dialog ui-widget ui-widget-content ui-corner-all ";n.widget("ui.dialog",{_init:function(){this.originalTitle=this.element.attr("title");var f=this,t=this.options,s=t.title||this.originalTitle||"&nbsp;",o=n.ui.dialog.getTitleId(this.element),e=(this.uiDialog=n("<div/>")).appendTo(document.body).hide().addClass(i+t.dialogClass).css({position:"absolute",overflow:"hidden",zIndex:t.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(i){t.closeOnEscape&&i.keyCode&&i.keyCode==n.ui.keyCode.ESCAPE&&f.close(i)}).attr({role:"dialog","aria-labelledby":o}).mousedown(function(n){f.moveToTop(!1,n)}),h=this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(e),u=(this.uiDialogTitlebar=n("<div><\/div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(e),r=n('<a href="#"/>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){r.addClass("ui-state-hover")},function(){r.removeClass("ui-state-hover")}).focus(function(){r.addClass("ui-state-focus")}).blur(function(){r.removeClass("ui-state-focus")}).mousedown(function(n){n.stopPropagation()}).click(function(n){return f.close(n),!1}).appendTo(u),c=(this.uiDialogTitlebarCloseText=n("<span/>")).addClass("ui-icon ui-icon-closethick").text(t.closeText).appendTo(r),l=n("<span/>").addClass("ui-dialog-title").attr("id",o).html(s).prependTo(u);u.find("*").add(u).disableSelection(),t.draggable&&n.fn.draggable&&this._makeDraggable(),t.resizable&&n.fn.resizable&&this._makeResizable(),this._createButtons(t.buttons),this._isOpen=!1,t.bgiframe&&n.fn.bgiframe&&e.bgiframe(),t.autoOpen&&this.open()},destroy:function(){this.overlay&&this.overlay.destroy(),this.uiDialog.hide(),this.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle)},close:function(t){var i=this,r;!1!==i._trigger("beforeclose",t)&&(i.overlay&&i.overlay.destroy(),i.uiDialog.unbind("keypress.ui-dialog"),i.options.hide?i.uiDialog.hide(i.options.hide,function(){i._trigger("close",t)}):i.uiDialog.hide()&&i._trigger("close",t),n.ui.dialog.overlay.resize(),i._isOpen=!1,i.options.modal&&(r=0,n(".ui-dialog").each(function(){this!=i.uiDialog[0]&&(r=Math.max(r,n(this).css("z-index")))}),n.ui.dialog.maxZ=r))},isOpen:function(){return this._isOpen},moveToTop:function(t,i){if(this.options.modal&&!t||!this.options.stack&&!this.options.modal)return this._trigger("focus",i);this.options.zIndex>n.ui.dialog.maxZ&&(n.ui.dialog.maxZ=this.options.zIndex),this.overlay&&this.overlay.$el.css("z-index",n.ui.dialog.overlay.maxZ=++n.ui.dialog.maxZ);var r={scrollTop:this.element.attr("scrollTop"),scrollLeft:this.element.attr("scrollLeft")};this.uiDialog.css("z-index",++n.ui.dialog.maxZ),this.element.attr(r),this._trigger("focus",i)},open:function(){if(!this._isOpen){var i=this.options,t=this.uiDialog;this.overlay=i.modal?new n.ui.dialog.overlay(this):null,t.next().length&&t.appendTo("body"),this._size(),this._position(i.position),t.show(i.show),this.moveToTop(!0),i.modal&&t.bind("keypress.ui-dialog",function(t){if(t.keyCode==n.ui.keyCode.TAB){var i=n(":tabbable",this),r=i.filter(":first")[0],u=i.filter(":last")[0];t.target!=u||t.shiftKey?t.target==r&&t.shiftKey&&setTimeout(function(){u.focus()},1):setTimeout(function(){r.focus()},1)}}),n([]).add(t.find(".ui-dialog-content :tabbable:first")).add(t.find(".ui-dialog-buttonpane :tabbable:first")).add(t).filter(":first").focus(),this._trigger("open"),this._isOpen=!0}},_createButtons:function(t){var u=this,i=!1,r=n("<div><\/div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");this.uiDialog.find(".ui-dialog-buttonpane").remove(),typeof t=="object"&&t!==null&&n.each(t,function(){return!(i=!0)}),i&&(n.each(t,function(t,i){n('<button type="button"><\/button>').addClass("ui-state-default ui-corner-all").text(t).click(function(){i.apply(u.element[0],arguments)}).hover(function(){n(this).addClass("ui-state-hover")},function(){n(this).removeClass("ui-state-hover")}).focus(function(){n(this).addClass("ui-state-focus")}).blur(function(){n(this).removeClass("ui-state-focus")}).appendTo(r)}),r.appendTo(this.uiDialog))},_makeDraggable:function(){var i=this,t=this.options,r;this.uiDialog.draggable({cancel:".ui-dialog-content",handle:".ui-dialog-titlebar",containment:"document",start:function(){r=t.height,n(this).height(n(this).height()).addClass("ui-dialog-dragging"),t.dragStart&&t.dragStart.apply(i.element[0],arguments)},drag:function(){t.drag&&t.drag.apply(i.element[0],arguments)},stop:function(){n(this).removeClass("ui-dialog-dragging").height(r),t.dragStop&&t.dragStop.apply(i.element[0],arguments),n.ui.dialog.overlay.resize()}})},_makeResizable:function(t){t=t===undefined?this.options.resizable:t;var r=this,i=this.options,u=typeof t=="string"?t:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",alsoResize:this.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:i.minHeight,start:function(){n(this).addClass("ui-dialog-resizing"),i.resizeStart&&i.resizeStart.apply(r.element[0],arguments)},resize:function(){i.resize&&i.resize.apply(r.element[0],arguments)},handles:u,stop:function(){n(this).removeClass("ui-dialog-resizing"),i.height=n(this).height(),i.width=n(this).width(),i.resizeStop&&i.resizeStop.apply(r.element[0],arguments),n.ui.dialog.overlay.resize()}}).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_position:function(t){var u=n(window),f=n(document),i=f.scrollTop(),r=f.scrollLeft(),e=i;if(n.inArray(t,["center","top","right","bottom","left"])>=0&&(t=[t=="right"||t=="left"?t:"center",t=="top"||t=="bottom"?t:"middle"]),t.constructor!=Array&&(t=["center","middle"]),t[0].constructor==Number)r+=t[0];else switch(t[0]){case"left":r+=0;break;case"right":r+=u.width()-this.uiDialog.outerWidth();break;default:case"center":r+=(u.width()-this.uiDialog.outerWidth())/2}if(t[1].constructor==Number)i+=t[1];else switch(t[1]){case"top":i+=0;break;case"bottom":i+=u.height()-this.uiDialog.outerHeight();break;default:case"middle":i+=(u.height()-this.uiDialog.outerHeight())/2}i=Math.max(i,e),this.uiDialog.css({top:i,left:r})},_setData:function(r,u){t[r]&&this.uiDialog.data(t[r],u);switch(r){case"buttons":this._createButtons(u);break;case"closeText":this.uiDialogTitlebarCloseText.text(u);break;case"dialogClass":this.uiDialog.removeClass(this.options.dialogClass).addClass(i+u);break;case"draggable":u?this._makeDraggable():this.uiDialog.draggable("destroy");break;case"height":this.uiDialog.height(u);break;case"position":this._position(u);break;case"resizable":var e=this.uiDialog,f=this.uiDialog.is(":data(resizable)");f&&!u&&e.resizable("destroy"),f&&typeof u=="string"&&e.resizable("option","handles",u),f||this._makeResizable(u);break;case"title":n(".ui-dialog-title",this.uiDialogTitlebar).html(u||"&nbsp;");break;case"width":this.uiDialog.width(u)}n.widget.prototype._setData.apply(this,arguments)},_size:function(){var n=this.options,t;this.element.css({height:0,minHeight:0,width:"auto"}),t=this.uiDialog.css({height:"auto",width:n.width}).height(),this.element.css({minHeight:Math.max(n.minHeight-t,0),height:n.height=="auto"?"auto":Math.max(n.height-t,0)})}}),n.extend(n.ui.dialog,{version:"1.7.2",defaults:{autoOpen:!0,bgiframe:!1,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:"center",resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},getter:"isOpen",uuid:0,maxZ:0,getTitleId:function(n){return"ui-dialog-title-"+(n.attr("id")||++this.uuid)},overlay:function(t){this.$el=n.ui.dialog.overlay.create(t)}}),n.extend(n.ui.dialog.overlay,{instances:[],maxZ:0,events:n.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(n){return n+".dialog-overlay"}).join(" "),create:function(t){this.instances.length===0&&(setTimeout(function(){n.ui.dialog.overlay.instances.length&&n(document).bind(n.ui.dialog.overlay.events,function(t){var i=n(t.target).parents(".ui-dialog").css("zIndex")||0;return i>n.ui.dialog.overlay.maxZ})},1),n(document).bind("keydown.dialog-overlay",function(i){t.options.closeOnEscape&&i.keyCode&&i.keyCode==n.ui.keyCode.ESCAPE&&t.close(i)}),n(window).bind("resize.dialog-overlay",n.ui.dialog.overlay.resize));var i=n("<div><\/div>").appendTo(document.body).addClass("ui-widget-overlay").css({width:this.width(),height:this.height()});return t.options.bgiframe&&n.fn.bgiframe&&i.bgiframe(),this.instances.push(i),i},destroy:function(t){this.instances.splice(n.inArray(this.instances,t),1),this.instances.length===0&&n([document,window]).unbind(".dialog-overlay"),t.remove();var i=0;n.each(this.instances,function(){i=Math.max(i,this.css("z-index"))}),this.maxZ=i},height:function(){if(n.browser.msie&&n.browser.version<7){var t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),i=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);return t<i?n(window).height()+"px":t+"px"}return n(document).height()+"px"},width:function(){if(n.browser.msie&&n.browser.version<7){var t=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),i=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);return t<i?n(window).width()+"px":t+"px"}return n(document).width()+"px"},resize:function(){var t=n([]);n.each(n.ui.dialog.overlay.instances,function(){t=t.add(this)}),t.css({width:0,height:0}).css({width:n.ui.dialog.overlay.width(),height:n.ui.dialog.overlay.height()})}}),n.extend(n.ui.dialog.overlay.prototype,{destroy:function(){n.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);
//@ sourceMappingURL=ui.dialog.min.js.map