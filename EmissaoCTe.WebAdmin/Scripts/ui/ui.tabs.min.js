(function(n){n.widget("ui.tabs",{_init:function(){this.options.deselectable!==undefined&&(this.options.collapsible=this.options.deselectable);this._tabify(!0)},_setData:function(n,t){if(n=="selected"){if(this.options.collapsible&&t==this.options.selected)return;this.select(t)}else this.options[n]=t,n=="deselectable"&&(this.options.collapsible=t),this._tabify()},_tabId:function(t){return t.title&&t.title.replace(/\s/g,"_").replace(/[^A-Za-z0-9\-_:\.]/g,"")||this.options.idPrefix+n.data(t)},_sanitizeSelector:function(n){return n.replace(/:/g,"\\:")},_cookie:function(){var t=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+n.data(this.list[0]));return n.cookie.apply(null,[t].concat(n.makeArray(arguments)))},_ui:function(n,t){return{tab:n,panel:t,index:this.anchors.index(n)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var t=n(this);t.html(t.data("label.tabs")).removeData("label.tabs")})},_tabify:function(t){function a(t,i){t.css({display:""});n.browser.msie&&i.opacity&&t[0].style.removeAttribute("filter")}var e,o,s,h,u,f,c,l;this.list=this.element.children("ul:first");this.lis=n("li:has(a[href])",this.list);this.anchors=this.lis.map(function(){return n("a",this)[0]});this.panels=n([]);var r=this,i=this.options,v=/^#.+/;for(this.anchors.each(function(t,u){var f=n(u).attr("href"),s=f.split("#")[0],h,o,e;s&&(s===location.toString().split("#")[0]||(h=n("base")[0])&&s===h.href)&&(f=u.hash,u.href=f);v.test(f)?r.panels=r.panels.add(r._sanitizeSelector(f)):f!="#"?(n.data(u,"href.tabs",f),n.data(u,"load.tabs",f.replace(/#.*$/,"")),o=r._tabId(u),u.href="#"+o,e=n("#"+o),e.length||(e=n(i.panelTemplate).attr("id",o).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(r.panels[t-1]||r.list),e.data("destroy.tabs",!0)),r.panels=r.panels.add(e)):i.disabled.push(t)}),t?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),i.selected===undefined?(location.hash&&this.anchors.each(function(n,t){if(t.hash==location.hash)return i.selected=n,!1}),typeof i.selected!="number"&&i.cookie&&(i.selected=parseInt(r._cookie(),10)),typeof i.selected!="number"&&this.lis.filter(".ui-tabs-selected").length&&(i.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),i.selected=i.selected||0):i.selected===null&&(i.selected=-1),i.selected=i.selected>=0&&this.anchors[i.selected]||i.selected<0?i.selected:0,i.disabled=n.unique(i.disabled.concat(n.map(this.lis.filter(".ui-state-disabled"),function(n){return r.lis.index(n)}))).sort(),n.inArray(i.selected,i.disabled)!=-1&&i.disabled.splice(n.inArray(i.selected,i.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),i.selected>=0&&this.anchors.length&&(this.panels.eq(i.selected).removeClass("ui-tabs-hide"),this.lis.eq(i.selected).addClass("ui-tabs-selected ui-state-active"),r.element.queue("tabs",function(){r._trigger("show",null,r._ui(r.anchors[i.selected],r.panels[i.selected]))}),this.load(i.selected)),n(window).bind("unload",function(){r.lis.add(r.anchors).unbind(".tabs");r.lis=r.anchors=r.panels=null})):i.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[i.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),i.cookie&&this._cookie(i.selected,i.cookie),e=0;o=this.lis[e];e++)n(o)[n.inArray(e,i.disabled)!=-1&&!n(o).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled");i.cache===!1&&this.anchors.removeData("cache.tabs");this.lis.add(this.anchors).unbind(".tabs");i.event!="mouseover"&&(s=function(n,t){t.is(":not(.ui-state-disabled)")&&t.addClass("ui-state-"+n)},h=function(n,t){t.removeClass("ui-state-"+n)},this.lis.bind("mouseover.tabs",function(){s("hover",n(this))}),this.lis.bind("mouseout.tabs",function(){h("hover",n(this))}),this.anchors.bind("focus.tabs",function(){s("focus",n(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){h("focus",n(this).closest("li"))}));i.fx&&(n.isArray(i.fx)?(u=i.fx[0],f=i.fx[1]):u=f=i.fx);c=f?function(t,i){n(t).closest("li").removeClass("ui-state-default").addClass("ui-tabs-selected ui-state-active");i.hide().removeClass("ui-tabs-hide").animate(f,f.duration||"normal",function(){a(i,f);r._trigger("show",null,r._ui(t,i[0]))})}:function(t,i){n(t).closest("li").removeClass("ui-state-default").addClass("ui-tabs-selected ui-state-active");i.removeClass("ui-tabs-hide");r._trigger("show",null,r._ui(t,i[0]))};l=u?function(n,t){t.animate(u,u.duration||"normal",function(){r.lis.removeClass("ui-tabs-selected ui-state-active").addClass("ui-state-default");t.addClass("ui-tabs-hide");a(t,u);r.element.dequeue("tabs")})}:function(n,t){r.lis.removeClass("ui-tabs-selected ui-state-active").addClass("ui-state-default");t.addClass("ui-tabs-hide");r.element.dequeue("tabs")};this.anchors.bind(i.event+".tabs",function(){var t=this,u=n(this).closest("li"),f=r.panels.filter(":not(.ui-tabs-hide)"),e=n(r._sanitizeSelector(this.hash));if(u.hasClass("ui-tabs-selected")&&!i.collapsible||u.hasClass("ui-state-disabled")||u.hasClass("ui-state-processing")||r._trigger("select",null,r._ui(this,e[0]))===!1)return this.blur(),!1;if(i.selected=r.anchors.index(this),r.abort(),i.collapsible){if(u.hasClass("ui-tabs-selected"))return i.selected=-1,i.cookie&&r._cookie(i.selected,i.cookie),r.element.queue("tabs",function(){l(t,f)}).dequeue("tabs"),this.blur(),!1;if(!f.length)return i.cookie&&r._cookie(i.selected,i.cookie),r.element.queue("tabs",function(){c(t,e)}),r.load(r.anchors.index(this)),this.blur(),!1}if(i.cookie&&r._cookie(i.selected,i.cookie),e.length)f.length&&r.element.queue("tabs",function(){l(t,f)}),r.element.queue("tabs",function(){c(t,e)}),r.load(r.anchors.index(this));else throw"jQuery UI Tabs: Mismatching fragment identifier.";n.browser.msie&&this.blur()});this.anchors.bind("click.tabs",function(){return!1})},destroy:function(){var t=this.options;this.abort();this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs");this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.anchors.each(function(){var t=n.data(this,"href.tabs"),i;t&&(this.href=t);i=n(this).unbind(".tabs");n.each(["href","load","cache"],function(n,t){i.removeData(t+".tabs")})});this.lis.unbind(".tabs").add(this.panels).each(function(){n.data(this,"destroy.tabs")?n(this).remove():n(this).removeClass("ui-state-default ui-corner-top ui-tabs-selected ui-state-active ui-state-hover ui-state-focus ui-state-disabled ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide")});t.cookie&&this._cookie(null,t.cookie)},add:function(t,i,r){var u;r===undefined&&(r=this.anchors.length);var e=this,o=this.options,f=n(o.tabTemplate.replace(/#\{href\}/g,t).replace(/#\{label\}/g,i)),s=t.indexOf("#")?this._tabId(n("a",f)[0]):t.replace("#","");f.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);u=n("#"+s);u.length||(u=n(o.panelTemplate).attr("id",s).data("destroy.tabs",!0));u.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide");r>=this.lis.length?(f.appendTo(this.list),u.appendTo(this.list[0].parentNode)):(f.insertBefore(this.lis[r]),u.insertBefore(this.panels[r]));o.disabled=n.map(o.disabled,function(n){return n>=r?++n:n});this._tabify();this.anchors.length==1&&(f.addClass("ui-tabs-selected ui-state-active"),u.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){e._trigger("show",null,e._ui(e.anchors[0],e.panels[0]))}),this.load(0));this._trigger("add",null,this._ui(this.anchors[r],this.panels[r]))},remove:function(t){var i=this.options,r=this.lis.eq(t).remove(),u=this.panels.eq(t).remove();r.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(t+(t+1<this.anchors.length?1:-1));i.disabled=n.map(n.grep(i.disabled,function(n){return n!=t}),function(n){return n>=t?--n:n});this._tabify();this._trigger("remove",null,this._ui(r.find("a")[0],u[0]))},enable:function(t){var i=this.options;n.inArray(t,i.disabled)!=-1&&(this.lis.eq(t).removeClass("ui-state-disabled"),i.disabled=n.grep(i.disabled,function(n){return n!=t}),this._trigger("enable",null,this._ui(this.anchors[t],this.panels[t])))},disable:function(n){var i=this,t=this.options;n!=t.selected&&(this.lis.eq(n).addClass("ui-state-disabled"),t.disabled.push(n),t.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[n],this.panels[n])))},select:function(n){typeof n=="string"?n=this.anchors.index(this.anchors.filter("[href$="+n+"]")):n===null&&(n=-1);n==-1&&this.options.collapsible&&(n=this.options.selected);this.anchors.eq(n).trigger(this.options.event+".tabs")},load:function(t){var i=this,r=this.options,u=this.anchors.eq(t)[0],e=n.data(u,"load.tabs"),f;if(this.abort(),!e||this.element.queue("tabs").length!==0&&n.data(u,"cache.tabs")){this.element.dequeue("tabs");return}this.lis.eq(t).addClass("ui-state-processing");r.spinner&&(f=n("span",u),f.data("label.tabs",f.html()).html(r.spinner));this.xhr=n.ajax(n.extend({},r.ajaxOptions,{url:e,success:function(f,e){n(i._sanitizeSelector(u.hash)).html(f);i._cleanup();r.cache&&n.data(u,"cache.tabs",!0);i._trigger("load",null,i._ui(i.anchors[t],i.panels[t]));try{r.ajaxOptions.success(f,e)}catch(o){}i.element.dequeue("tabs")}}))},abort:function(){this.element.queue([]);this.panels.stop(!1,!0);this.xhr&&(this.xhr.abort(),delete this.xhr);this._cleanup()},url:function(n,t){this.anchors.eq(n).removeData("cache.tabs").data("load.tabs",t)},length:function(){return this.anchors.length}});n.extend(n.ui.tabs,{version:"1.7.2",getter:"length",defaults:{ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disabled:[],event:"click",fx:null,idPrefix:"ui-tabs-",panelTemplate:"<div><\/div>",spinner:"<em>Loading&#8230;<\/em>",tabTemplate:'<li><a href="#{href}"><span>#{label}<\/span><\/a><\/li>'}});n.extend(n.ui.tabs.prototype,{rotation:null,rotate:function(n,i){var r=this,u=this.options,f=r._rotate||(r._rotate=function(t){clearTimeout(r.rotation);r.rotation=setTimeout(function(){var n=u.selected;r.select(++n<r.anchors.length?n:0)},n);t&&t.stopPropagation()}),e=r._unrotate||(r._unrotate=i?function(){t=u.selected;f()}:function(n){n.clientX&&r.rotate(null)});n?(this.element.bind("tabsshow",f),this.anchors.bind(u.event+".tabs",e),f()):(clearTimeout(r.rotation),this.element.unbind("tabsshow",f),this.anchors.unbind(u.event+".tabs",e),delete this._rotate,delete this._unrotate)}})})(jQuery);