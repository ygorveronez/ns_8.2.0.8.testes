(function(n){n.widget("ui.slider",n.extend({},n.ui.mouse,{_init:function(){var t=this,i=this.options;if(this._keySliding=!1,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this.range=n([]),i.range&&(i.range===!0?(this.range=n("<div><\/div>"),i.values||(i.values=[this._valueMin(),this._valueMin()]),i.values.length&&i.values.length!=2&&(i.values=[i.values[0],i.values[0]])):this.range=n("<div><\/div>"),this.range.appendTo(this.element).addClass("ui-slider-range"),(i.range=="min"||i.range=="max")&&this.range.addClass("ui-slider-range-"+i.range),this.range.addClass("ui-widget-header")),n(".ui-slider-handle",this.element).length==0&&n('<a href="#"><\/a>').appendTo(this.element).addClass("ui-slider-handle"),i.values&&i.values.length)while(n(".ui-slider-handle",this.element).length<i.values.length)n('<a href="#"><\/a>').appendTo(this.element).addClass("ui-slider-handle");this.handles=n(".ui-slider-handle",this.element).addClass("ui-state-default ui-corner-all");this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(n){n.preventDefault()}).hover(function(){i.disabled||n(this).addClass("ui-state-hover")},function(){n(this).removeClass("ui-state-hover")}).focus(function(){i.disabled?n(this).blur():(n(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),n(this).addClass("ui-state-focus"))}).blur(function(){n(this).removeClass("ui-state-focus")});this.handles.each(function(t){n(this).data("index.ui-slider-handle",t)});this.handles.keydown(function(i){var o=!0,f=n(this).data("index.ui-slider-handle"),u,r,e;if(!t.options.disabled){switch(i.keyCode){case n.ui.keyCode.HOME:case n.ui.keyCode.END:case n.ui.keyCode.UP:case n.ui.keyCode.RIGHT:case n.ui.keyCode.DOWN:case n.ui.keyCode.LEFT:o=!1;t._keySliding||(t._keySliding=!0,n(this).addClass("ui-state-active"),t._start(i,f))}e=t._step();u=t.options.values&&t.options.values.length?r=t.values(f):r=t.value();switch(i.keyCode){case n.ui.keyCode.HOME:r=t._valueMin();break;case n.ui.keyCode.END:r=t._valueMax();break;case n.ui.keyCode.UP:case n.ui.keyCode.RIGHT:if(u==t._valueMax())return;r=u+e;break;case n.ui.keyCode.DOWN:case n.ui.keyCode.LEFT:if(u==t._valueMin())return;r=u-e}return t._slide(i,f,r),o}}).keyup(function(i){var r=n(this).data("index.ui-slider-handle");t._keySliding&&(t._stop(i,r),t._change(i,r),t._keySliding=!1,n(this).removeClass("ui-state-active"))});this._refreshValue()},destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider");this._mouseDestroy()},_mouseCapture:function(t){var u=this.options,e,c;if(u.disabled)return!1;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();var o={x:t.pageX,y:t.pageY},f=this._normValueFromMouse(o),s=this._valueMax()-this._valueMin()+1,i,h=this,r;return this.handles.each(function(t){var u=Math.abs(f-h.values(t));s>u&&(s=u,i=n(this),r=t)}),u.range==!0&&this.values(1)==u.min&&(i=n(this.handles[++r])),this._start(t,r),h._handleIndex=r,i.addClass("ui-state-active").focus(),e=i.offset(),c=!n(t.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=c?{left:0,top:0}:{left:t.pageX-e.left-i.width()/2,top:t.pageY-e.top-i.height()/2-(parseInt(i.css("borderTopWidth"),10)||0)-(parseInt(i.css("borderBottomWidth"),10)||0)+(parseInt(i.css("marginTop"),10)||0)},f=this._normValueFromMouse(o),this._slide(t,r,f),!0},_mouseStart:function(){return!0},_mouseDrag:function(n){var t={x:n.pageX,y:n.pageY},i=this._normValueFromMouse(t);return this._slide(n,this._handleIndex,i),!1},_mouseStop:function(n){return this.handles.removeClass("ui-state-active"),this._stop(n,this._handleIndex),this._change(n,this._handleIndex),this._handleIndex=null,this._clickOffset=null,!1},_detectOrientation:function(){this.orientation=this.options.orientation=="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(n){var i,r,t;"horizontal"==this.orientation?(i=this.elementSize.width,r=n.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(i=this.elementSize.height,r=n.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0));t=r/i;t>1&&(t=1);t<0&&(t=0);"vertical"==this.orientation&&(t=1-t);var o=this._valueMax()-this._valueMin(),u=t*o,f=u%this.options.step,e=this._valueMin()+u-f;return f>this.options.step/2&&(e+=this.options.step),parseFloat(e.toFixed(5))},_start:function(n,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values());this._trigger("start",n,i)},_slide:function(n,t,i){var e=this.handles[t],f,r,u;this.options.values&&this.options.values.length?(r=this.values(t?0:1),this.options.values.length==2&&this.options.range===!0&&(t==0&&i>r||t==1&&i<r)&&(i=r),i!=this.values(t)&&(f=this.values(),f[t]=i,u=this._trigger("slide",n,{handle:this.handles[t],value:i,values:f}),r=this.values(t?0:1),u!==!1&&this.values(t,i,n.type=="mousedown"&&this.options.animate,!0))):i!=this.value()&&(u=this._trigger("slide",n,{handle:this.handles[t],value:i}),u!==!1&&this._setData("value",i,n.type=="mousedown"&&this.options.animate))},_stop:function(n,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values());this._trigger("stop",n,i)},_change:function(n,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values());this._trigger("change",n,i)},value:function(n){return arguments.length&&(this._setData("value",n),this._change(null,0)),this._value()},values:function(n,t,i,r){return arguments.length>1&&(this.options.values[n]=t,this._refreshValue(i),r||this._change(null,n)),arguments.length?this.options.values&&this.options.values.length?this._values(n):this.value():this._values()},_setData:function(t,i,r){n.widget.prototype._setData.apply(this,arguments);switch(t){case"disabled":i?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.attr("disabled","disabled")):this.handles.removeAttr("disabled");case"orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue(r);break;case"value":this._refreshValue(r)}},_step:function(){return this.options.step},_value:function(){var n=this.options.value;return n<this._valueMin()&&(n=this._valueMin()),n>this._valueMax()&&(n=this._valueMax()),n},_values:function(n){if(arguments.length){var t=this.options.values[n];return t<this._valueMin()&&(t=this._valueMin()),t>this._valueMax()&&(t=this._valueMax()),t}return this.options.values},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(t){var f=this.options.range,r=this.options,i=this;if(this.options.values&&this.options.values.length)this.handles.each(function(u){var f=(i.values(u)-i._valueMin())/(i._valueMax()-i._valueMin())*100,e={};e[i.orientation=="horizontal"?"left":"bottom"]=f+"%";n(this).stop(1,1)[t?"animate":"css"](e,r.animate);i.options.range===!0&&(i.orientation=="horizontal"?(u==0&&i.range.stop(1,1)[t?"animate":"css"]({left:f+"%"},r.animate),u==1&&i.range[t?"animate":"css"]({width:f-lastValPercent+"%"},{queue:!1,duration:r.animate})):(u==0&&i.range.stop(1,1)[t?"animate":"css"]({bottom:f+"%"},r.animate),u==1&&i.range[t?"animate":"css"]({height:f-lastValPercent+"%"},{queue:!1,duration:r.animate})));lastValPercent=f});else{var h=this.value(),e=this._valueMin(),o=this._valueMax(),u=o!=e?(h-e)/(o-e)*100:0,s={};s[i.orientation=="horizontal"?"left":"bottom"]=u+"%";this.handle.stop(1,1)[t?"animate":"css"](s,r.animate);f=="min"&&this.orientation=="horizontal"&&this.range.stop(1,1)[t?"animate":"css"]({width:u+"%"},r.animate);f=="max"&&this.orientation=="horizontal"&&this.range[t?"animate":"css"]({width:100-u+"%"},{queue:!1,duration:r.animate});f=="min"&&this.orientation=="vertical"&&this.range.stop(1,1)[t?"animate":"css"]({height:u+"%"},r.animate);f=="max"&&this.orientation=="vertical"&&this.range[t?"animate":"css"]({height:100-u+"%"},{queue:!1,duration:r.animate})}}}));n.extend(n.ui.slider,{getter:"value values",version:"1.7.2",eventPrefix:"slide",defaults:{animate:!1,delay:0,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null}})})(jQuery);